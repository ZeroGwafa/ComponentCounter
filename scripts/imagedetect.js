//require /runeappslib.js
//require /a1lib.js

function InterfaceTracker(t,i){var a=this;this.pos=!1,this.bounds=t,this.listening=!1,this.confirmfind=null,this.mainbuffer=!1,ImageData.fromUrl(i,function(t){a.mainbuffer=t}),this.listeners={found:[],detected:[],trackmatch:[],starttrack:[],stoptrack:[],message:[]},this.listen=this.addEventListener=function(t,i){this.listeners[t].push(i)},this.unlisten=this.removeEventListener=function(t,i){var a;if(i){if(-1==(a=this.listeners[t].indexOf(i)))return;this.listeners[t].splice(a,1)}else this.listeners[t]=[]},this.dispatch=function(t,i){var a;for(a=0;a<this.listeners[t].length;a++)this.listeners[t][a].apply(null,i)},this.find=function(i){var a,e,h;if(i||(i=InterfaceTracker.getLastImg()),i){if(e=!1,!(e=(h=this.refind(i))||e)){if((a=a1lib.findsubimg(i,this.mainbuffer,[],0,0,i.width,i.height)).length>1&&console.log("Warning - more than one possible location found for interface"),0==a.length)return!1;if(this.confirmfind&&!this.confirmfind(i,a[0].x+t.x,a[0].y+t.y))return!1;this.pos={x:a[0].x+t.x,y:a[0].y+t.y},e=!0}return h||this.dispatch("detected",[this.pos]),this.dispatch("found",[this.pos]),this.pos}this.message("Couldn't complete this action as no input image is available.","noInput")},this.refind=function(t){if(this.pos){var i=t.toData(this.pos.x-this.bounds.x,this.pos.y-this.bounds.y,this.mainbuffer.width,this.mainbuffer.height);if(!1!==a1lib.simplecompare(i,this.mainbuffer,0,0))return!(this.confirmfind&&!this.confirmfind(t,this.pos.x,this.pos.y))&&(this.dispatch("detected",[this.pos]),this.pos)}return!1},this.getFullInterface=function(t){return this.pos?(t||(t=InterfaceTracker.getLastImg()),t?t.toData(this.pos.x,this.pos.y,this.bounds.width,this.bounds.height):(this.message("Couldn't complete this action as no input image is available.","noInput"),!1)):(console.log("Warning - tried to get buffer while interface was not yet found."),!1)},this.trackTimer=!1,this.track=function(){this.trackTimer||(this.trackTimer=setTimeout(this.trackTick,a1lib.trackinterval),this.dispatch("starttrack"))},this.trackTick=function(){var t;if(a.pos){if(!(t=a1lib.getregion(a.pos.x-a.bounds.x,a.pos.y-a.bounds.y,a.mainbuffer.width,a.mainbuffer.height)))return a.untrack(),void message("Failed to get image from screen.","getRegionFailed");!1!==a1lib.simplecompare(t,a.mainbuffer,0,0)&&(a.dispatch("detected",[a.pos]),a.dispatch("trackmatch",[a.pos])),a.trackTimer=setTimeout(a.trackTick,a1lib.trackinterval)}},this.untrack=function(){this.trackTimer&&(clearTimeout(this.trackTimer),this.trackTimer=!1,this.dispatch("stoptrack"))},this.message=function(t,i){i||(i="other"),this.dispatch("message",[t,i]),console.log(t)}}function ImgRef(t){this.t="none",this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this.toData=function(){throw"This imgref ("+this.t+") does not support toData"}}function ImgRefCtx(t,i){i||(i=new Rect(0,0,t.width,t.height)),ImgRef.call(this,i),t instanceof CanvasRenderingContext2D?this.ctx=t:this.ctx=imgtoctx(t),this.t="ctx",this.toData=function(t,i,a,e){return void 0==t&&(t=this.x,i=this.y,a=this.width,e=this.height),this.ctx.getImageData(t-this.x,i-this.y,a,e)}}function ImgRefBind(t,i){ImgRef.call(this,i),this.t="bind",this.handle=t,this.toData=function(t,i,a,e){return void 0==t&&(t=this.x,i=this.y,a=this.width,e=this.height),a1lib.bindgetregion(this.handle,t-this.x,i-this.y,a,e)}}function ImgRefData(t,i){i||(i=new Rect(0,0,t.width,t.height)),ImgRef.call(this,i),this.t="data",this.buf=t,this.toData=function(t,i,a,e){if(void 0==t)return this.buf;var h,s,n,r,o;for(t-=this.x,i-=this.y,n=new ImageData(a,e),s=i;s<i+e;s++)for(h=t;h<t+a;h++)r=4*(h-t)+(s-i)*a*4,o=4*h+4*s*this.buf.width,n.data[r]=this.buf.data[o],n.data[r+1]=this.buf.data[o+1],n.data[r+2]=this.buf.data[o+2],n.data[r+3]=this.buf.data[o+3];return n}}function ImageTemplateSet(t){var i,a;if(a=this,this.buffers=[],t)for(i=0;i<t.length;i++)"string"==typeof t[i]?(this.buffers[i]=!1,ImageData.fromUrl(t[i],function(t,i){a.buffers[i]=t},i)):this.buffers[i]=t[i];else this.buffers=[]}function ImageSet(t,i){var a,e;if(e=this,this.buffers=[],t)if(i)ImageData.fromUrl(t,function(t){for(var a=0;a<i.length;a++)e.buffers[a]=t.clone(new Rect(i[a],0,(a==i.length-1?t.width:i[a+1])-i[a],t.height))});else for(a=0;a<t.length;a++)"string"==typeof t[a]?(this.buffers[a]=!1,ImageData.fromUrl(t[a],function(t,i){e.buffers[i]=t},a)):this.buffers[a]=t[a];else this.buffers=[]}function Rect(t,i,a,e){"object"==typeof t?(this.x=t.x,this.y=t.y,this.width=(void 0!=t.width?t.width:t.w)||0,this.height=(void 0!=t.height?t.height:t.h)||0):(this.x=t,this.y=i,this.width=a,this.height=e)}HTMLImageElement.prototype.toBuffer=function(t,i,a,e){var h;return t||(t=0),i||(i=0),a||(a=this.width-t),e||(e=this.height-i),(h=document.createElement("canvas")).width=a,h.height=e,(h=h.getContext("2d")).drawImage(this,-t,-i),h.getImageData(0,0,a,e)},InterfaceTracker.lastimg=!1,InterfaceTracker.getLastImg=function(){var t;if(this.lastimg){if(this.lastimg.time+5e3>Date.now())return this.lastimg;this.lastimg=!1}return t=!1,window.alt1&&alt1.permissionPixel?(t=a1lib.bindfullrs()).time=Date.now():PasteInput.lastref&&((t=PasteInput.lastref).time=Date.now()),t||console.log("Warning - no input image availible for InterfaceTracker.getLastImg."),t},PasteInput=new function(){var t=this;this.listeners=[],this.started=!1,this.dndStarted=!1,this.pasting=!1,this.lastimg=!1,this.lastref=!1,this.listen=function(t,i,a){this.listeners.push({cb:t,error:i}),this.started||this.start(),a&&!this.dndStarted&&this.startDragNDrop()},this.pasted=function(t){var i;this.pasting=!1,this.lastimg=imgtocnv(t),this.lastref=new ImgRefCtx(this.lastimg);for(i in this.listeners)this.listeners[i].cb(this.lastimg,this.lastref)},this.error=function(t,i){var a;this.pasting=!1;for(a in this.listeners)this.listeners[a].error&&this.listeners[a].error(t,i)},this.startDragNDrop=function(){window.addEventListener("dragover",function(t){t.preventDefault()}),window.addEventListener("drop",function(a){var e=function(i){for(var a="",e=0;e<i.length;e++){var h=i[e],s=h.type.match(/^image\/(\w+)$/);if(s){if("png"==s[1])return h;a=s[1]}}return a&&t.error("The image you uploaded is not a .png image. Other image type have compression noise and can't be used for image detection.","notpng"),null}(a.dataTransfer.items);a.preventDefault(),e&&i(e.getAsFile())})},this.start=function(){var i,a;if(!this.started){this.started=!0,function(t,i){var a;this.pasting=!1;for(a in this.listeners)this.listeners[a].error&&this.listeners[a].error(t,i)},i=!!navigator.userAgent.match(/Chrome/),navigator.userAgent.match(/Edge/)&&(i=!1);var e=function(i){for(var a=0;a<i.clipboardData.items.length;a++)if(-1!=i.clipboardData.items[a].type.indexOf("image")){var e=i.clipboardData.items[a].getAsFile(),h=new Image;h.src=(window.URL||window.webkitURL).createObjectURL(e),h.width>0?t.pasted(h):h.onload=function(){t.pasted(h)}}};i?document.addEventListener("paste",e):((a=document.createElement("div")).setAttribute("contenteditable",""),a.className="forcehidden",a.onpaste=function(i){i.clipboardData&&i.clipboardData.items?e(i):setTimeout(function(){var i,e,h;(h=a.children[0])&&"IMG"==h.tagName&&((i=new Image).src=h.src,(e=i.src.match(/^data:([\w\/]+);/))?i.type=e[1]:i.type="image/unknown",i.width>0?t.pasted(i):i.onload=function(){t.pasted(i)},a.innerHTML="")},1)},document.body.appendChild(a)),document.addEventListener("keydown",function(i){"INPUT"!=i.target.tagName&&i.keyCode=="V".charCodeAt()&&i.ctrlKey&&(t.pasting=!0,setTimeout(function(){t.pasting&&t.error("You pressed Ctrl+V, but no image was pasted by your browser, make sure your clipboard contains an image, and not a link to an image.\n This may also happen if your browser is (very) outdated.","noimg")},1e3),a&&a.focus())})}},this.fileDialog=function(){var t=eldiv(":input/file",{accept:"image/png"});return t.onchange=function(){t.files[0]&&i(t.files[0])},t.click(),t};var i=function(i){var a=new FileReader;a.onload=function(){var i=new Uint8Array(a.result);ImageData.fixPngBuffer(i);var e=new Blob([i],{type:"image/png"});img=new Image,img.onerror=t.error.bind(t,"The file you uploaded could not be opened as an image.","invalidfile");var h=URL.createObjectURL(e);img.src=h,img.width>0?(t.pasted(img),URL.revokeObjectURL(h)):img.onload=function(){t.pasted(img),URL.revokeObjectURL(h)}},a.readAsArrayBuffer(i)}},ImgRefCtx.prototype=Object.create(ImgRef.prototype),ImgRefCtx.prototype.constructor=ImgRefCtx,ImgRefBind.prototype=Object.create(ImgRef.prototype),ImgRefBind.prototype.constructor=ImgRefBind,ImgRefData.prototype=Object.create(ImgRef.prototype),ImgRefData.prototype.constructor=ImgRefData,function(){var t;(t=function(){var t,i,a=0;if(arguments[0]instanceof Uint8ClampedArray)var e=arguments[a++];t=arguments[a++],i=arguments[a++];var h=document.createElement("canvas");h.width=t,h.height=i;var s=h.getContext("2d").createImageData(t,i);return e&&s.data.set(e),s}).prototype=ImageData.prototype,ImageData=t}(),ImageData.isPngBuffer=function(t){return 137==t[0]&&80==t[1]&&78==t[2]&&71==t[3]},ImageData.fixPngBuffer=function(t){var i=0;if(137==t[i++]&&80==t[i++]&&78==t[i++]&&71==t[i++])for(i+=4;i<t.length;){var a=16777216*t[i++]+65536*t[i++]+256*t[i++]+t[i++],e=!!(t[i]>>5&1),h=String.fromCharCode(t[i],t[i+1],t[i+2],t[i+3]);if(e){t[i+0]="n".charCodeAt(0),t[i+1]="o".charCodeAt(0),t[i+2]="P".charCodeAt(0),t[i+3]="E".charCodeAt(0);for(var s=i+4+a,n=4294967295,r=function(t){for(var i=0;i<8;i++)1&t?t=3988292384^t>>>1:t>>>=1;return t},o=i;o<s;o++){o>=i+4&&(t[o]=0),n=r(255&(n^t[o]))^n>>>8}n^=4294967295,t[i+4+a+0]=n>>24&255,t[i+4+a+1]=n>>16&255,t[i+4+a+2]=n>>8&255,t[i+4+a+3]=n>>0&255,console.log("Cleared png chunk: "+h)}if("IEND"==h)break;i+=4,i+=a,i+=4}else qw("non-png image received")},ImageData.fromUrl=function(t,i,a){var e;(e=new Image).crossOrigin="crossorigin",e.onload=function(){i(e.toBuffer(),a)},e.src=t},ImageData.fromBase64=function(t,i){var a;(a=new Image).onload=function(){t(a.toBuffer())},a.src="data:image/png;base64,"+i},ImageData.fromArray=function(t,i,a){if(t.length!=i*a)throw"Invalid array size";for(var e=Math.min.apply(null,t),h=Math.max.apply(null,t)-e,s=new ImageData(i,a),n=0;n<i*a;n++){var r=4*n;s.data[r]=s.data[r+1]=s.data[r+2]=(t[n]-e)/h*255,s.data[r+3]=255}return s},ImageData.prototype.underSample=function(t,i,a){null==a&&(a=new Rect(0,0,this.width,this.height));var e=document.createElement("canvas");e.width=t,e.height=i;var h=e.getContext("2d");return h.drawImage(this.toImage(),a.x,a.y,a.width,a.height,0,0,t,i),h.getImageData(0,0,t,i)},ImageData.prototype.underSampleSine=function(t,i,a,e){null==a&&(a=new Rect(0,0,this.width,this.height)),null==e&&(e=4);for(var h=a.width/t,s=a.height/i,n=h*s,r=new ImageData(t,i),o=r.data,d=0;d<a.width;d++)for(var f=0;f<a.height;f++)for(var c=(d-.5*h)/h,g=(f-.5*s)/s,u=(1+Math.cos((c+1)%1*Math.PI))/2,m=(1+Math.cos((g+1)%1*Math.PI))/2,l=1-u,p=1-m,w=Math.floor(c),y=Math.floor(g),v=w+1,x=y+1,b=4*(d+a.x)+4*this.width*(f+a.y),I=0;I<e;I++)w>=0&&y>=0&&(o[4*w+4*t*y+I]+=u*m*this.data[b+I]/n),w>=0&&x<i&&(o[4*w+4*t*x+I]+=u*p*this.data[b+I]/n),v<t&&y>=0&&(o[4*v+4*t*y+I]+=l*m*this.data[b+I]/n),v<t&&x<i&&(o[4*v+4*t*x+I]+=l*p*this.data[b+I]/n);return r},ImageData.prototype.putImageData=function(t,i,a){for(var e=0;e<t.width;e++)for(var h=0;h<t.height;h++){var s=4*(e+i)+4*(h+a)*this.width,n=4*e+4*h*t.width;this.data[s]=t.data[n],this.data[s+1]=t.data[n+1],this.data[s+2]=t.data[n+2],this.data[s+3]=t.data[n+3]}},ImageData.prototype.getDiffMap=function(t){var i,a,e,h,s,n;for(t||(t=new Rect(0,0,this.width,this.height)),r=new ImageData(t.width,t.height),s=4*this.width,i=t.x;i<t.x+t.width;i++)for(a=t.y;a<t.y+t.height;a++)i1=4*i+a*s,i2=4*(i-t.x)+(a-t.y)*s,n=this.data[i1+3],i1%s<s?(e=Math.abs(this.data[i1]-this.data[i1+4])+Math.abs(this.data[i1+1]-this.data[i1+5])+Math.abs(this.data[i1+2]-this.data[i1+6]),n=Math.min(n,this.data[i1+4+3])):e=0,Math.floor(i1/s<this.height)?(h=Math.abs(this.data[i1]-this.data[i1+s])+Math.abs(this.data[i1+1]-this.data[i1+s+1])+Math.abs(this.data[i1+2]-this.data[i1+s+2]),n=Math.min(n,this.data[i1+s+3])):h=0,r.data[i2]=e/3,r.data[i2+1]=h/3,r.data[i2+2]=0,r.data[i2+3]=n;return r},ImageData.prototype.pixelOffset=function(t,i){return 4*t+i*this.width*4},ImageData.prototype.blur=function(t){var i,a,e,h,s,n,r,o,d,f;for(e=4*this.width,i=0;i<this.width;i++)for(a=0;a<this.height;a++){for(h=s=n=0,r=0,o=Math.max(i-t,0);o<Math.min(i+t+1,this.width);o++)for(d=Math.max(a-t,0);d<Math.min(a+t+1,this.height);d++)f=4*o+e*d,r++,h+=this.data[f],s+=this.data[f+1],n+=this.data[f+2];f=4*i+e*a,this.data[f]=h/r,this.data[f+1]=s/r,this.data[f+2]=n/r}return this},ImageData.prototype.getPixelHash=function(t){t||(t=new Rect(0,0,this.width,this.height));for(var i=0,a=t.x;a<t.x+t.width;a++)for(var e=t.y;e<t.y+t.height;e++){var h=4*a+4*e*this.width;i=((i=((i=((i=(i<<5)-i+this.data[h]|0)<<5)-i+this.data[h+1]|0)<<5)-i+this.data[h+2]|0)<<5)-i+this.data[h+3]|0}return i},ImageData.prototype.createTemplate=function(t){var i,a,e,h,s,n,r,o,d,f,c,g,u,m,l,p,w;for(t||(t=new Rect(0,0,this.width,this.height)),r=new ImageData(2*t.width,t.height),d=[[0,0],[0,1],[1,0],[-1,0],[0,-1]],0,i=0;i<t.width;i++)for(cr=cg=cb=0,a=0;a<t.width;a++){h=4*(i+t.x)+4*(a+t.y)*this.width,s=4*i+4*a*r.width,f=255,c=0,g=255,u=0,m=255,l=0;for(e in d)(p=i+d[e][0])<0||p>=t.width||(w=a+d[e][1])<0||w>=t.height||(n=4*(p+t.x)+4*(w+t.y)*this.width,255==this.data[n+3]&&(f=Math.min(f,this.data[n]),g=Math.min(g,this.data[n+1]),m=Math.min(m,this.data[n+2]),c=Math.max(c,this.data[n]),u=Math.max(u,this.data[n+1]),l=Math.max(l,this.data[n+2])));o=this.data[h+3],r.data[s]=f,r.data[s+1]=g,r.data[s+2]=m,r.data[s+3]=o,s+=4*t.width,r.data[s]=c,r.data[s+1]=u,r.data[s+2]=l,r.data[s+3]=o}return r},ImageData.prototype.matchTemplate=function(t,i,a){var e,h,s,n,r,o,d,f,c,g,u,m,l,p,w,y,v;for(i||0===i||(i=0,a=0),n=0,h=0;h<t.width/2;h++)for(s=0;s<t.height;s++)o=4*(i+h)+4*(a+s)*this.width,f=(d=4*h+4*s*t.width)+t.width/2*4,r=t.data[d+3],c=t.data[d]-this.data[o],g=this.data[o]-t.data[f],w=Math.max(0,c,g),u=t.data[d+1]-this.data[o+1],m=this.data[o+1]-t.data[f+1],y=Math.max(0,u,m),l=t.data[d+2]-this.data[o+2],p=this.data[o+2]-t.data[f+2],e=w+y+(v=Math.max(0,l,p))-2*Math.min(w,y,v),e*=e,n+=e*=r/255;return n/t.width*2/t.height},ImageData.prototype.clone=function(t){return this.toImage(t).getContext("2d").getImageData(0,0,t.width,t.height)},ImageData.prototype.show=function(){for(var t,i=document.getElementsByClassName("debugimage"),a=0;i.length-1>10;a++)i[a].remove();return(t=buffertoimage(this)).classList.add("debugimage"),t.style.position="absolute",t.style.zIndex=1e3,t.style.left="5px",t.style.top="5px",t.style.background="purple",t.style.cursor="pointer",t.style.imageRendering="pixelated",t.style.outline="1px solid #0f0",t.style.width=(1==this.width?100:this.width)+"px",t.style.height=(1==this.height?100:this.height)+"px",t.onclick=function(){t.remove()},document.body.appendChild(t),t},ImageData.prototype.showAt=function(t,i,a){void 0==a&&(a=1);var e=this.show();return e.style.left=t/a+"px",e.style.top=i/a+"px",e.style.zoom=a,e},ImageData.prototype.toImage=function(t){var i;return t||(t=new Rect(0,0,this.width,this.height)),(i=document.createElement("canvas")).width=t.width,i.height=t.height,i.getContext("2d").putImageData(this,-t.x,-t.y),i},ImageData.prototype.brighten=function(t){var i,a,e;for(i=0;i<this.width;i++)for(a=0;a<this.height;a++)e=4*i+4*a*this.width,this.data[e]+=t,this.data[e+1]+=t,this.data[e+2]+=t},ImageData.prototype.multiply=function(t,i,a){var e,h,s,n,r;for(r=new ImageData(t.width,t.height),i||0===i||(i=0,a=0),e=0;e<t.width;e++)for(h=0;h<t.height;h++)s=4*(i+e)+4*this.width*(a+h),n=4*e+4*t.width*h,r.data[n+0]=this.data[s+0]*t.data[n+0]/255,r.data[n+1]=this.data[s+1]*t.data[n+1]/255,r.data[n+2]=this.data[s+2]*t.data[n+2]/255,r.data[n+3]=t.data[n+3];return r},ImageData.prototype.diffSum=function(t,i,a){var e,h,s,n,r,o;for(r=0,i||0===i||(i=0,a=0),e=0;e<t.width;e++)for(h=0;h<t.height;h++)s=4*(i+e)+4*this.width*(a+h),n=4*e+4*t.width*h,o=0,o+=Math.abs(this.data[s+0]-t.data[n+0]),o+=Math.abs(this.data[s+1]-t.data[n+1]),r+=(o+=Math.abs(this.data[s+2]-t.data[n+2]))*this.data[s+3]*t.data[n+3]/255/255;return r/t.width/t.height},ImageData.prototype.getPixel=function(t,i){var a=4*t+4*i*this.width;return[this.data[a],this.data[a+1],this.data[a+2],this.data[a+3]]},ImageData.prototype.getSubSample=function(t,i){var a=Math.floor(t),e=Math.floor(i),h=this.getPixel(a,e),s=this.getPixel(a,e+1),n=this.getPixel(a+1,e),r=this.getPixel(a+1,e+1),o=t-a,d=i-e,f=1-o,c=1-d;return[o*d*h[0]+o*c*s[0]+f*d*n[0]+f*c*r[0],o*d*h[1]+o*c*s[1]+f*d*n[1]+f*c*r[1],o*d*h[2]+o*c*s[2]+f*d*n[2]+f*c*r[2],o*d*h[3]+o*c*s[3]+f*d*n[3]+f*c*r[3]]},ImageData.prototype.getPixelInt=function(t,i){var a=4*t+4*i*this.width;return(this.data[a+3]<<24)+(this.data[a+0]<<16)+(this.data[a+1]<<8)+(this.data[a+2]<<0)},ImageData.prototype.containsPixel=function(t,i){return t>0&&t<this.width&&i>0&&i<this.height},ImageData.prototype.setPixel=function(t,i,a,e,h,s){var n=4*t+4*i*this.width;this.data[n]=a,this.data[n+1]=e,this.data[n+2]=h,this.data[n+3]=void 0==s?255:s},ImageData.prototype.comparePixel=function(t,i,a,e,h){var s=4*t+4*i*this.width,n=0;return n+=Math.abs(this.data[s]-a),n+=Math.abs(this.data[s+1]-e),n+=Math.abs(this.data[s+2]-h)},ImageData.prototype.toJSON=function(){var t=this.toImage().toDataURL("image/png");return t.slice(t.indexOf(",")+1)},ImageTemplateSet.prototype.findBest=function(t,i,a){var e,h,s,n;for(h=!1,s=1/0,e=0;e<this.buffers.length;e++)(n=t.matchTemplate(this.buffers[e],i,a))<s&&(h=e,s=n);return h},ImageSet.prototype.findBest=function(t,i,a){var e,h,s,n;for(h=!1,s=1/0,e=0;e<this.buffers.length;e++)(n=a1lib.simplecompare(t,this.buffers[e],i,a,-1))<s&&(h=e,s=n);return h},Rect.prototype.intersect=function(t){var i=Math.min(this.x,t.x),a=Math.min(this.y,t.y);return this.width=Math.max(this.x+this.width,t.x+t.width)-i,this.height=Math.max(this.y+this.height,t.y+t.height)-a,this.x=i,this.y=a,this},Rect.prototype.intersectPoint=function(t,i){this.intersect(new Rect(t,i,0,0))},Rect.prototype.inflate=function(t,i){this.x-=t,this.y-=i,this.width+=2*t,this.height+=2*i},Rect.prototype.contain=function(t){this.x<t.x&&(this.width-=t.x-this.x,this.x=t.x),this.y<t.y&&(this.height-=t.y-this.y,this.y=t.y),this.width=Math.min(this.x+this.width,t.x+t.width)-this.x,this.height=Math.min(this.y+this.height,t.y+t.height)-this.y},Rect.prototype.overlaps=function(t){return this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.y+this.height>t.y},Rect.prototype.contains=function(t){return this.x<=t.x&&this.x+this.width>=t.x+t.width&&this.y<=t.y&&this.y+this.height>=t.y+t.height},Rect.prototype.containsPoint=function(t,i){return this.x<=t&&this.x+this.width>t&&this.y<=i&&this.y+this.height>i};