function reporterror(e,t,n,o,r){reportederrors.length,qw("Error not reported.")}floor=Math.floor,round=Math.round,ceil=Math.ceil,PI=Math.PI,PI2=2*Math.PI,LOG10=Math.log(10),lvl90=lvltoxp(90),lvl99=lvltoxp(99),lvl120=lvltoxp(120),maxtotlvl=2595,maxqp=378,taskmaster={att:75,str:76,ran:64,mag:83,def:70,hpx:35,pra:95,sum:95,dun:95,agi:90,thi:91,sla:93,hun:59,smi:95,cra:98,fle:85,her:94,run:91,coo:95,con:60,fir:92,woo:80,far:91,fis:96,min:81,div:86,inv:0},skillnames=["tot","att","str","ran","mag","def","hpx","pra","sum","dun","agi","thi","sla","hun","smi","cra","fle","her","run","coo","con","fir","woo","far","fis","min","div","inv"],fullskillnames=["Total","Attack","Strength","Ranged","Magic","Defence","Constitution","Prayer","Summoning","Dungeoneering","Agility","Thieving","Slayer","Hunter","Smithing","Crafting","Fletching","Herblore","Runecrafting","Cooking","Construction","Firemaking","Woodcutting","Farming","Fishing","Mining","Divination","Invention"],bossnames=["ban","arm","zam","sar","qbd","nex","kkx","kqx","kbd","tds","pho","cor","dks","jad","kil","bor","gla","skh","mol","clb","clm","clh","cle","cha","vor","ara"],fullbossnames=["Bandos","Armadyl","Zamorak","Saradomin","Queen Black Dragon","Nex","Kalphite King","Kalphite Queen","King Black Dragon","Tormented Demon","Phoenix","Corpereal Beast","Dagannoth Kings","TzTok-Jad","Fight Kiln","Bork","Glacor","Skeletal Horror","Giant Mole","Easy Clue","Medium Clue","Hard Clue","Elite Clue","Chaos Elemental","Vorago","Araxxor"],shortbossnames=["Band","Arma","Zam","Sara","QBD","Nex","KK","KQ","KBD","TDS","Phoen","Corp","DKS","Jad","Kiln","Bork","Glacor","Sk. H.","Mole","TT 1","TT 2","TT 3","TT 4","Chaos","Vor","Arax"],medbossnames=["Bandos","Armadyl","Zamorak","Saradomin","QBD","Nex","Kal King","Kal Queen","KBD","TDS","Phoenix","Corp Beast","Dagg kings","TzTok-Jad","Fight Kiln","Bork","Glacor","Sk Horror","Giant Mole","Easy Clue","Med Clue","Hard Clue","1337 Clue","Chaos Ele","Vorago","Araxxor"],minignames=["dom","cru","cas","baa","bad","bac","bah","mob","cnq","fog"],fullminignames=["Dominion tower","The Crucible","Castle Wars","Barbarian Assault Attacker","Barbarian Assault Defender","Barbarian Assault Collecter","Barbarian Assault Healer","Mobilising Armies","Conquest","Fist of Guthix"],medminignames=["D Tower","Crucible","C Wars","BA Att","BA Def","BA Col","BA heal","M Armies","Conquest","Fist of G"],shortminignames=["Dom","Cruc","CW","BA a","BA d","BA c","BA h","Mob","Conq","FOG"],monthnames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],fullmonthnames=["January","February","March","April","May","June","July","August","September","October","November","December"],weekdaynames=["mon","tue","wed","thu","fri","sat","sun"],trackables=["totlv","qpxam","rptsc","rptra"],skillnames.forEach(function(e){trackables.push(e+"xp"),trackables.push(e+"ra")}),minignames.forEach(function(e){trackables.push(e+"sc"),trackables.push(e+"ra")}),bossnames.forEach(function(e){trackables.push(e+"kc"),trackables.push(e+"ra")}),mouseloc={x:-1,y:-1,dx:0,dy:0,sx:-1,sy:-1},draghandler=!1,binchars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_-",clogcount=0,window.onerror=reporterror,reportederrors=[],window.addEventListener("load",function(){var e=getframeelement(),t=document.documentElement||document.body;(""==document.body.getAttribute("data-noscroll")||"true"==document.body.getAttribute("data-noscroll")||e&&(""==e.getAttribute("data-noscroll")||"true"==e.getAttribute("data-noscroll")))&&(document.addEventListener("scroll",function(){0!=t.scrollLeft&&(t.scrollLeft=0)}),t.addEventListener("scroll",function(){0!=t.scrollLeft&&(t.scrollLeft=0)}))}),storageallowed=!0;try{storageallowed=!!window.localStorage}catch(e){storageallowed=!1}function dlpage(e,t,n){var o;o=new XMLHttpRequest,t&&(o.onload=function(){t(o.responseText)}),n&&(o.onerror=function(){n()}),o.open("GET",e,!0),o.send()}function dlpagepost(e,t,n,o){var r,i,l,a;window.XMLHttpRequest&&(r=new XMLHttpRequest),n&&(r.onload=function(){n(r.responseText)}),o&&(r.onerror=o),i="",a="";for(l in t){var s;s="object"==typeof t[l]?jsonEncode(t[l]):t[l]+"",i+=a+encodeURIComponent(l)+"="+encodeURIComponent(s),a="&"}r.open("POST",e,!0),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.send(i)}function dlpagejson(e,t,n,o){var r=new XMLHttpRequest;r.onload=function(){var e=jsonDecode(r.responseText);null!=e?n&&n(e):o&&o()},r.onerror=o,t?(r.open("POST",e,!0),r.setRequestHeader("Content-type","application/json"),r.send(jsonEncode(t))):(r.open("GET",e,!0),r.send())}function clog(e,t){if(clogcount++,5e3==clogcount&&console.log("WARNING more than 5000 logs. clog has been disabled to prevent crash."),!(clogcount>5e3))return void 0!==t?(console.log(e,t),t):(console.log(e),e)}function clogarray(e){var t,n,o,r;for(n=Math.max.apply(null,e),r=Math.ceil(n).toString().length,t=0;t<e.length;t++){for(o="",b=0;b<n&&(b+=n/150,!(b>e[t]));)o+="=";clog(addzeros(t,3," ")+" - "+addzeros(Math.round(e[t]),r," "),o)}}function divfill(e,t){var n=elid(e);n&&(n.innerHTML=t)}function promptbox(e,t,n,o){var r;"number"==typeof t&&(t={width:t}),t=applyobject({width:400,measurewidth:0,measureheight:0,btnwidth:200,style:"default",parent:null,closefunction:null,title:e,fadein:!0,stylesheets:[]},t),"object"==typeof o?r=o:void 0!=o&&(r.cancel=o),r.inputs={},r.close=function(){if(i.closefunc)i.closefunc();else{var e=function(){try{i.root.remove()}catch(e){}};t.fadein?(i.root.style.opacity=0,i.root.style.pointerEvents="none",setTimeout(e,1e3)):e()}},r.exit=function(){!1!==r.runfunc("cancel")&&r.close()},r.getid=function(e){return i.root.ownerDocument.getElementById("promptboxid_"+e)},r.runfunc=function(e,t){for(var n=e.split(" "),o=null,i=0;i<n.length;i++)o=r.runsingle(n[i]);return o},r.runsingle=function(e,t){var n=e.split("-");if(!r[n[0]])return null;var o=r.data();o.args=n.slice(1),o.sender=t,r[n[0]](o,i)},r.data=function(){var e=[],t=i.root.getElementsByClassName("input");for(var n in t)"object"==typeof t[n]&&("checkbox"==t[n].type&&e.push(t[n].checked),"color"==t[n].type&&e.push(t[n].value),"text"==t[n].type&&e.push(t[n].value),"SELECT"==t[n].tagName&&e.push(t[n].value));return e};var i=("function"==typeof t.style?t.style:"nis"==t.style?promptbox_nis:"popup"==t.style?promptbox_popup:promptbox_default)(t),l=promptboxbuttons(t,n,r);return i.contentbox.appendChild(l),i.root.classList.add("measuring"),document.body.appendChild(i.root),t.measurewidth=i.root.clientWidth,t.measureheight=i.root.clientHeight,i.closebutton&&(i.closebutton.onclick=r.runfunc.bind(null,"exit")),i.root.onchange=r.runfunc.bind(null,"change"),i.insertfunc?(i.insertfunc(i,t,r),i.root.classList.remove("measuring")):(i.root.style.marginTop=-t.measureheight/2+"px",i.root.style.marginLeft=-t.measurewidth/2+"px",top.document.body.appendChild(i.root),i.root.classList.remove("measuring"),i.root.style.opacity=0,t.fadein&&setTimeout(function(){i.root.style.opacity=1},1)),{els:i,functions:r,options:t}}function promptbox2(e,t){var n=("function"==typeof(e=applyobject({width:400,measurewidth:0,measureheight:0,style:"default",onclose:null,onchange:null,title:"",fadein:!0,stylesheets:[],parent:document.body,v2:!0},e)).style?e.style:"nis"==e.style?promptbox_nis:"popup"==e.style?promptbox_popup:"fakepopup"==e.style?promptbox_fakepopup:promptbox_default)(e);n.close=function(){if(n.closefunc)n.closefunc();else{var t=function(){try{n.root.remove()}catch(e){}};e.fadein?(n.root.style.opacity=0,n.root.style.pointerEvents="none",setTimeout(t,1e3)):t()}};var o=promptboxbuttons2(t);o.frame=n,n.contentbox.appendChild(o.frag),n.root.classList.add("measuring"),document.body.appendChild(n.root),e.measurewidth=n.root.clientWidth,e.measureheight=n.root.clientHeight;return n.closebutton&&(n.closebutton.onclick=function(){e.onclose&&!1===e.onclose()||n.close()}),e.onchange&&(n.root.onchange=e.onchange.b()),n.insertfunc?(n.insertfunc(n,e),n.root.classList.remove("measuring")):(n.root.style.marginTop=-e.measureheight/2+"px",n.root.style.marginLeft=-e.measurewidth/2+"px",e.parent.appendChild(n.root),n.root.classList.remove("measuring"),n.root.style.opacity=0,e.fadein&&setTimeout(function(){n.root.style.opacity=1},1)),o}function promptboxbuttons(e,t,n){var o,r=document.createDocumentFragment();for(b in t){var i=t[b];o=i.id?"promptboxid_"+i.id:"";var l=i.width||e.btnwidth;if("text"==i.type&&r.appendChild(elcreate("div","promptboxtext","width:"+(l-10)+"px",{id:o},i.title)),"story"==i.type&&r.appendChild(elcreate("div","promptboxstory","width:"+(l-10)+"px"),{id:o},i.title),"br"==i.type&&r.appendChild(elcreate("div","promptboxbr",null,{id:o})),"label"==i.type&&r.appendChild(elcreate("div",null,"display:none",{id:o,"data-label":i.value})),"input"==i.type&&r.appendChild(elcreate("input","sliminput promptboxinput input","width:"+(l-10)+"px",{id:o,type:"text",value:i.value||""})),"checkbox"==i.type&&r.appendChild(elcreate("label","promptboxtext","width:"+(l-10)+"px",{id:o},[elcreate("input","input",null,applyobject({type:"checkbox"},i.value?{checked:""}:{})),"Â "+i.title])),"button"==i.type)(a=elcreate("input","sliminput promptboxbutton","width:"+(l-10)+"px",{id:o,type:"button",value:i.title})).onclick=n.runfunc.bind(null,i.func),r.appendChild(a);if("color"==i.type)(a=elcreate("input","sliminput promptboxcolor input","width:"+(l-10)+"px",{id:o,type:"color"})).value=i.value||"",r.appendChild(a);if("dropdown"==i.type){var a=elcreate("select","sliminput promptboxdropdown input","width:"+(l-10)+"px",{id:o});for(var s in i.title)a.appendChild(elcreate("option",null,null,applyobject({value:i.title[s][0]},i.title[s][0]==i.value?{selected:""}:{}),i.title[s][1]));r.appendChild(a)}}return r}function csslength(e){return"number"==typeof e?e+"px":e}function promptboxbuttons2(e){var t=document.createDocumentFragment(),n={};n.frag=t;for(var o=0;o<e.length;o++){var r=e[o],i=r.t.match(/^(\w+)(?:\/([\w-]+))?(?::([\w-]+))?$/),l=i[1]||r.type,a=i[2]||r.arg,s=i[3]||r.id,d=null,u=!!r.isinput||!1,c=r.style||"";null!=r.flexwidth&&(c+="width:"+100*r.flexwidth+"%;"),null!=r.flexheight&&(c+="height:"+100*r.flexheight+"%;"),null!=r.height&&(c+="height:"+csslength(r.height)+";"),null!=r.width&&(c+="width:"+csslength(r.width)+";");var p={};if(c&&(p.style=c),r.attr&&applyobject(p,r.attr),"string"!=l&&"password"!=l||((d=eldiv("password"==l?"pb2-string pbs-password:input/password":"pb2-string:input/text",p)).getValue=function(){return this.value}.bind(d),d.setValue=function(e){this.value=e}.bind(d),u=!0),"number"==l&&(null!=r.min&&(p.min=r.min),null!=r.max&&(p.max=r.max),(d=eldiv("pb2-number:input/text",p)).getValue=function(){return parseFloat(this.value)}.bind(d),d.setValue=function(e){this.value=parseFloat(e)}.bind(d),u=!0),"int"==l&&(null!=r.min&&(p.min=r.min),null!=r.max&&(p.max=r.max),null!=r.step&&(p.step=r.step),(d=eldiv("pb2-int:input/number",p)).getValue=function(){return parseInt(this.value)}.bind(d),d.setValue=function(e){this.value=parseInt(e)}.bind(d),null==r.step&&d.addEventListener("change",function(){d.step=Math.max(1,Math.pow(10,Math.floor(Math.log10(Math.abs(d.value)))-1))}),u=!0),"color"==l&&((d=eldiv("pb2-color:input/color",p)).getValue=function(){var e=this.value.match(/^#([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/);return e?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]:[0,0,0]}.bind(d),d.setValue=function(e){this.value="#"+addzeros(e[0].toString(16),2)+addzeros(e[1].toString(16),2)+addzeros(e[2].toString(16),2)}.bind(d),u=!0),"bool"==l){var g=eldiv(":input/checkbox");(d=eldiv("pb2-bool",p,[eldiv(":label",[g,r.text])])).getValue=function(){return this.checked}.bind(g),d.setValue=function(e){this.checked=!!e}.bind(g),u=!0}if("dropdown"==l&&(d=eldiv("pb2-dropdown:select",p),r.options&&d.appendChild(elselect(r.options,r.v)),d.getValue=function(){return this.value}.bind(d),d.setValue=function(e){this.value=e}.bind(d),u=!0),"radio"==l){var f="",h=r.group||a;n[h]||(f=getuuid(),n[h]={els:{},uuid:f,getValue:function(){for(var e in this.els)if(this.els[e].checked)return this.els[e].value;return null},setValue:function(e){for(var t in this.els)this.els[t].value==e&&(this.els[t].checked=!0)},onchange:null});var m=n[h];g=eldiv(":input/radio",{name:m.uuid,value:r.v});d=eldiv("pb2-radio:label",p,[g,r.text]),n[h].els[s||getuuid()]=g,g.onchange=function(e){e.onchange&&e.onchange(e.getValue())}.b(m)}if("slider"==l){var v={};(d=eldiv("pb2-slide",[v.label=eldiv("pb2-slide-title"),v.bar=eldiv("pb2-slide-bar",[v.node=eldiv("pb2-slide-node")])])).drawValue=function(){var e=this.subs.value,t="",n=+e.toFixed(10);"string"==typeof this.subs.text&&(t=this.subs.text.replace(/%s/g,n)),"function"==typeof this.subs.text&&(t=this.subs.text(n)),this.subs.label.innerText=t;var o=this.subs.snaps?this.subs.snaps.indexOf(e):e;this.subs.node.style.left=(o-this.subs.min)/(this.subs.max-this.subs.min)*100+"%"}.bind(d),v.el=d,r.snaps?(v.snaps=r.snaps,v.min=0,v.max=r.snaps.length-1,v.step=1,v.value=r.value):(v.snaps=null,v.min=null!=r.min?r.min:0,v.step=null!=r.step?r.step:1,v.max=floorx(null!=r.max?r.max:100,v.step),v.value=v.min),v.text=r.text,v.oninput=r.oninput,v.onchange=r.onchange,function(e){var t=null,n=function(t){var n=e.bar.getBoundingClientRect(),o=Math.round((e.max-e.min)/e.step),r=Math.round((t.clientX-n.left)*o/n.width);r=Math.max(0,Math.min(o,r));var i=e.min+r*e.step;e.snaps?e.value=e.snaps[i]:e.value=i,e.el.drawValue(),e.oninput&&e.oninput(e.value,e)},o=function(r){t.removeEventListener("mousemove",n),t.removeEventListener("mouseup",o),e.onchange&&e.onchange(e.value,e)};e.bar.onmousedown=function(r){r.preventDefault(),(t=e.bar.ownerDocument.defaultView).addEventListener("mousemove",n),t.addEventListener("mouseup",o)}}(v),d.subs=v,d.setValue=function(e){this.subs.value=e,this.drawValue()}.bind(d),d.getValue=function(){return this.subs.value}.bind(d),u=!0}if("text"==l&&(d=eldiv("pb2-text",p,[r.text])),"br"==l&&(d=eldiv("pb2-br",p)),"header"==l&&(d=eldiv("pb2-header",p,[r.text])),"h"==l||"v"==l||"subregion"==l){if("h"==l||"v"==l){if(!r.sub&&a&&(r.sub=e.splice(o+1,a.length)),a){for(var b=0,y=0;y<a.length;y++)b+=+a[y];for(y=0;y<a.length;y++)r.sub[y]["h"==l?"flexwidth":"flexheight"]=+a[y]/b}d=eldiv("pb2-flex-"+l,p)}"subregion"==l&&(!r.sub&&a&&(r.sub=e.splice(o+1,+a)),(d=eldiv("pb2-subregion",p)).setLocked=function(e){toggleclass(this,"locked",!!e)}.bind(d),r.locked&&toggleclass(d,"locked",!0));g=promptboxbuttons2(r.sub);d.appendChild(g.frag);for(var y in g)"frag"!=y&&(n[y]=g[y])}if("button"==l&&(p.value=p.value||r.text,d=eldiv("pb2-button:input/button",p)),"custom"==l){d=r.dom;for(var y in p)d.setAttribute(y,p[y])}"div"==l&&(d=eldiv(a||"",p,r.sub)),r.onclick&&(d.onclick=r.onclick.b()),r.onchange&&(d.onchange=r.onchange.b()),u&&void 0!==r.v&&d.setValue(r.v),s&&(n[s]=d),t.appendChild(d)}return n}function promptboxinsert(e,t,n,o,r){void 0!=o&&applyobject(e.functions,o);var i=promptboxbuttons(e,n);r?t.parentNode.insertBefore(i,t.nextSibling):t.parentNode.insertBefore(i,t),e.style.marginTop=-e.clientHeight/2+"px"}function promptbox_default(e){var t={root:null,title:null,closebutton:null,contentbox:null,insertfunc:null,closefunc:null};return t.root=elcreate("div",e.v2?"contentbox pb2 pb2_default":"contentbox promptbox promptbox_default",null,null,[elcreate("div","contentboxhead",null,null,[elcreate("div","carbonleft"),elcreate("div","carbonmid contenttitle",null,null,[t.title=eldiv([e.title])]),elcreate("div","carbontoal"),elcreate("div","almid"),elcreate("div","alright",null,null,[t.closebutton=elcreate("div","closeboxbutton","display:block; margin-right:10px;")])]),t.contentbox=elcreate("div","contentboxinner")]),t.root.style.width=e.width+"px",t}function promptbox_popup(e){e.fadein=!1;var t={root:null,title:null,closebutton:null,contentbox:null,insertfunc:null,closefunc:null,window:null};return t.root=t.contentbox=elcreate("div",e.v2?"pb2 pb2_popup":"promptbox promptbox_popup"),t.root.style.width=e.width+"px",t.insertfunc=function(e,t){var n="testpopup_"+Date.now(),o=window.open("","promptbox"+n,"width="+t.measurewidth+",height="+t.measureheight);o.document.write("<!DOCTYPE html><head></head><body></body>"),o.document.body.style.cssText="margin:0px; padding:0px;",o.document.title=t.title,o.document.head.appendChild(elcreate("link",null,null,{href:absoluteUrl("/favicon.ico"),rel:"icon",type:"image/x-icon"})),t.stylesheets.push("/runeappslib.css");for(var r=0;r<t.stylesheets.length;r++)o.document.head.appendChild(elcreate("link",null,null,{href:absoluteUrl(t.stylesheets[r]),rel:"stylesheet",type:"text/css"}));o.document.body.appendChild(e.root),window.alt1&&overrideselect(o),t.closefunction||(t.closefunction=o.close.bind(o)),window.addEventListener("beforeunload",o.close.bind(o)),e.closefunc=o.close.bind(o),e.root.style.width="100%",e.window=o},t}function promptbox_nis(e){var t={root:null,title:null,closebutton:null,contentbox:null,insertfunc:null,closefunc:null};return t.root=elcreate("div",e.v2?"pb2 pb2_nis nisborder":"nisborder promptbox promptbox_nis",null,null,[elcreate("div",null,null,null,[t.closebutton=elcreate("div","nisclosebutton","position:absolute; top:4px; right:4px;"),t.title=eldiv({style:"font-size:18px; padding-left:5px; margin-bottom:-3px;"},[e.title]),elcreate("div","nisseperator","position:initial")]),t.contentbox=elcreate("div",null,"margin-top:3px;")]),t.root.style.width=e.width+"px",t}function promptbox_fakepopup(e){var t={root:null,title:null,closebutton:null,contentbox:null,insertfunc:null,closefunc:null};return t.root=eldiv("pb2 pb2_fakepopup",[eldiv([t.closebutton=eldiv("pb2_fakepopup-exit"),t.title=eldiv("pb2_fakepopup-title",[e.title])]),t.contentbox=eldiv({style:"margin:5px 2px 2px;"})]),t.root.style.width=e.width+"px",t}function floorx(e,t){return Math.floor(e/t)*t}function roundx(e,t){return Math.round(e/t)*t}function negmod(e,t){return(e%t+t)%t}function clearlocalstorage(e){var t;e=e||"";for(t in localStorage)t.slice(0,e.length)==e&&localStorage.removeItem(t)}function lvltoxp(e){var t,n;if(isNaN(e)||e>200)return 0;for(n=0,t=1;t<e;t+=1)n+=floor(t+300*Math.pow(2,t/7));return floor(n/4)}function xptolvl(e,t,n){for(var o=0;e>-1;)o+=1,e-=floor(o+300*Math.pow(2,o/7))/4;return o}storageallowed&&void 0==localStorage.timeoffset&&(localStorage.timeoffset="auto"),qw=console.log.bind(console),qe=console.trace.bind(console);var eliteskillxp=[0,830,1861,2902,3980,5126,6380,7787,9400,11275,13605,16372,19656,23546,28134,33520,39809,47109,55535,65209,77190,90811,106221,123573,143025,164742,188893,215651,245196,277713,316311,358547,404364,454796,509259,568254,632019,700797,774834,854383,946227,1044569,1149696,1261903,1381488,1508756,1644015,1787581,1939773,2100917,2283490,2476369,2679917,2894505,3120508,3358307,3608290,3870846,4146374,4435275,4758122,5096111,5449685,5819299,6205407,6608473,7028964,7467354,7924122,8399751,8925664,9472665,10041285,10632061,11245538,11882262,12542789,13227679,13937496,14672812,15478994,16313404,17176661,18069395,18992239,19945833,20930821,21947856,22997593,24080695,25259906,26475754,27728955,29020233,30350318,31719944,33129852,34580790,36073511,37608773,39270442,40978509,42733789,44537107,46389292,48291180,50243611,52247435,54303504,56412678,58575824,60793812,63067521,65397835,67785643,70231841,72737330,75303019,77929820,80618654,83370445,86186124,89066630,92012904,95025896,98106559,101255855,104474750,107764216,111125230,114558777,118065845,121647430,125304532,129038159,132849323,136739041,140708338,144758242,148889790,153104021,157401983,161784728,166253312,170808801,175452262,180184770,185007406,189921255,194927409];function smartxptolvl(e,t,n){var o=1;if("tot"==t)return qw("attempted to turn total xp into total level"),-1;if(e<0)return-1;if("inv"==t)for(o=1;o<eliteskillxp.length&&!(eliteskillxp[o]>e);o++);else o=xptolvl(e);return n&&(o="inv"==t||"dun"==t||"sla"==t?Math.min(120,o):Math.min(99,o)),o}function smartlvltoxp(e,t){return"inv"==t?eliteskillxp.length>e-1?eliteskillxp[e-1]:0:lvltoxp(e)}function addzeros(e,t,n,o){if((e+="").length==t)return e;if(e.length>t&&!o)return e.slice(-t);if(e.length>t&&o)return e.slice(0,t);if(e.length<t){for(;e.length<t;)e=(o?e:"")+(void 0==n?"0":n)+(o?"":e);return e}}function addspaces(e,t){if((e+="").length==t)return e;if(e.length>t)return e.slice(0,t);if(e.length<t){for(;e.length<t;)e="0"+e;return e}}function escapehtml(e){return(e+="").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/\\/g,"&#92;")}function escapequotes(e){return(e+="").replace(/'/g,"\\'").replace(/"/g,'\\"').replace(/\\/g,"\\\\")}function applyobject(e,t){if(t)for(var n in t)e[n]=t[n];return e}function balloonbox(e,t,n,o){var r,i,l,a,s,d,u,c,p,g,f,h,m;if(t?(d=("string"==typeof t.el?elid(t.el):t.el)||!1,u=t.w||300,c=t.h||!1,p=t.top||0,f=t.bottom||0,g=t.left||0,h=t.right||0,s=t.side||0,m=t.perpoffset||0,arrowoffset=t.arrowoffset||0,offset=t.offset||0):(u=300,d=!1),(r=document.createElement("div")).id="balloonbox",r.style.width=u+"px",c&&(r.style.height=c+"px"),a="",a+="<div onclick='this.parentNode.cancel();' style='float:right; cursor:pointer; width:15px; height:15px; background:url(\"/imgs/exit.png\"); margin-left:5px;'></div>",a+=e,n){r.fun={},a+="<div style='float:right;'>";for(l in n)a+="<div onclick='this.parentNode.parentNode.fun["+l+"]();' style='' class='balloonboxbutton"+("next"==n[l][2]?" balloonboxnext":"")+"'>"+n[l][0]+"</div>",n[l][1]?function(e){r.fun[e]=function(){0!=n[e][1](r)&&r.parentNode.removeChild(r)}}(l):r.fun[l]=function(){r.parentNode.removeChild(r)},"cancel"!=n[l][2]||o||(o=n[l][1]);a+="</div>"}return r.cancel=function(){o&&!1===o()||r.parentNode.removeChild(r)},r.style.position="absolute",r.innerHTML=a,d?d.ownerDocument.body.appendChild(r):document.body.appendChild(r),c||(c=r.clientHeight-20),d?(r.style.position="fixed"==d.style.position?"fixed":"absolute",i={top:(l=d.getBoundingClientRect()).top,left:l.left,bottom:l.bottom,right:l.right,width:l.width,height:l.height},"fixed"!=r.style.position&&(i.top+=window.pageYOffset,i.left+=window.pageXOffset),0==s&&(r.appendChild(str2node("<div style='position:absolute; top:-18px; left:"+(10+arrowoffset-offset)+'px; background:url("/imgs/ballooncorner.png") no-repeat 0px 0px; width:35px; height:18px;\'></div>')),r.style.top=i.top+i.height+10-m+"px",r.style.left=i.left+offset+"px"),1==s&&(r.appendChild(str2node("<div style='position:absolute; top:"+(10+arrowoffset-offset)+'px; left:-18px; background:url("/imgs/ballooncorner.png") no-repeat 0px 0px; width:18px; height:35px;\'></div>')),r.style.top=i.top+offset+"px",r.style.left=i.left+i.width-m+10+"px"),2==s&&(r.appendChild(str2node("<div style='position:absolute; bottom:-18px; left:"+(10+arrowoffset-offset)+'px; background:url("/imgs/ballooncorner.png") no-repeat 0px -17px; width:35px; height:18px;\'></div>')),r.style.top=i.top-c+m-30+"px",r.style.left=i.left+offset+"px"),3==s&&(r.appendChild(str2node("<div style='position:absolute; top:"+(10+arrowoffset-offset)+'px; right:-18px; background:url("/imgs/ballooncorner.png") no-repeat -17px 0px; width:18px; height:35px;\'></div>')),r.style.top=i.top+offset+"px",r.style.left=i.left-u+m-30+"px")):(r.style.position="absolute",g&&(r.style.left=g+"px"),p&&(r.style.top=p+"px"),f&&(r.style.bottom=f+"px"),h&&(r.style.right=h+"px")),r.style.height=c+"px",r.scrollIntoViewIfNeeded&&r.scrollIntoViewIfNeeded(),r}function spacednr(e){var t,n,o,r;for((e=Math.floor(e))<0?(r=!0,e=-e):r=!1,o="",n=(e=""+e).length-1,t=0;e[n-t];t+=1)t%3==0&&0!=t&&(o=","+o),o=e.slice(n-t,n-t+1)+o;return(r?"-":"")+o}function listdate(e){var t;return storageallowed&&"auto"!=localStorage.timeoffset?(t=new Date(e+1e3*localStorage.timeoffset*60*60)).getUTCDate()+" "+monthnames[t.getUTCMonth()]+" "+t.getUTCFullYear():(t=new Date(e)).getDate()+" "+monthnames[t.getMonth()]+" "+t.getFullYear()}function listtime(e){var t;return storageallowed&&"auto"!=localStorage.timeoffset?(t=new Date(e+1e3*localStorage.timeoffset*60*60)).getUTCHours()+":"+addzeros(t.getUTCMinutes(),2):(t=new Date(e)).getHours()+":"+addzeros(t.getMinutes(),2)}function shoutboxtime(e){var t,n,o;return t=new Date(e),n=new Date,yday=new Date,yday.setDate(yday.getDate()-1),n-t<36e5?o=timegap(n-t)+" ago":(o=t.getDate()==n.getDate()&&t.getMonth()==n.getMonth()&&t.getFullYear()==n.getFullYear()?"Today":t.getDate()==yday.getDate()&&t.getMonth()==yday.getMonth()&&t.getFullYear()==yday.getFullYear()?"Yesterday":t.getDate()+" "+monthnames[t.getMonth()],o+=", ",o+=addzeros(t.getHours(),2)+":"+addzeros(t.getMinutes(),2)),o}function timeago(e){return timegap(Date.now()-e)}function timegap(e){return e/=1e3,(e=Math.abs(e))<2?"one second":e<60?Math.floor(e)+" seconds":e<120?"one minute":e<3600?Math.floor(e/60)+" minutes":e<7200?"one hour":e<86400?Math.floor(e/60/60)+" hours":e<172800?"one day":e<2678400?Math.floor(e/24/60/60)+" days":e<5356800?"one month":e<31536e3?Math.floor(e/31/24/60/60)+" months":e<63072e3?"one year":Math.floor(e/365/24/60/60)+" years"}function lowname(e,t,n){return e=(e=(e=e.replace(/\+/g," ")).replace(/\%20/g," ")).replace(/[^\w \-]/g,""),n||(e=e.replace(/[ _\-]/g,"_").toLowerCase()),t&&((e=(e=(e=e.replace(/^[ _\-]+/,"")).replace(/[ _\-]+$/,"")).replace(/[ _\-]{2,}/,function(e){return"__________".slice(0,e.length)})).length>12||""==e)?"":e}function elq(e){return document.querySelector(e)}function elqa(e){return document.querySelectorAll(e)}function elid(e,t){return t?e.ownerDocument.getElementById(t):document.getElementById(e)}function elcl(e,t){return void 0!=t?e.getElementsByClassName(t):document.getElementsByClassName(e)}function checkaccess(e){var t;try{return!(t=e.contentWindow||e.window).denyaccess&&(t.document,t)}catch(t){return!1}}function getframeelement(){try{return frameElement||!1}catch(e){return!1}}function htmlentities(e){return String(e+="").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function smallu(e,t){var n,o;if(isNaN(e))return"-";if((e=Math.round(e))<0?(o="-",e=-e):o="",e>=1e15)return o+"quite a bit";if(e%1){if(e<100)return o+(e+"00").slice(0,4);e=Math.floor(e)}return n=e+="",e.length<=3?o+e+(t?"gp":""):4==e.length?o+e.slice(0,1)+","+e.slice(1,4)+(t?"gp":""):(e=e.length%3!=0?e.slice(0,e.length%3)+"."+e.slice(e.length%3,3):e.slice(0,3),n.length<=6?o+e+"k":n.length<=9?o+e+"m":n.length<=12?o+e+"b":n.length<=15?o+e+"t":void 0)}function startcaps(e){return e.charAt(0).toUpperCase()+e.slice(1)}function surfixnumber(e){return e%10==1&&11!=e?e+"st":e%10==2&&12!=e?e+"nd":e%10==3&&13!=e?e+"rd":e+"th"}function nicetime(e){return e<0?"--:--":(e>=36e5?Math.floor(e/1e3/60/60)+":":"")+addzeros(Math.floor(e/1e3/60)%60,2)+":"+addzeros(Math.floor(e/1e3)%60,2)}function rgb(e,t,n){return(e<<16)+(t<<8)+n}function coltohex(e,t,n){return void 0!=t&&void 0!=n&&(e=rgb(e,t,n)),"#"+addzeros(e.toString(16),6)}function fillarray(e,t){var n,o;for(o=new Array(e),n=0;n<e;n+=1)o[n]=t;return o}function str2node(e){var t;return(t=document.createElement("div")).innerHTML=e,t.firstChild}function newdraghandler2(e,t,n,o){var r,i=void 0!=o,l=e.clientX-e.screenX,a=e.clientY-e.screenY,s=e.screenX+l,d=e.screenY+a;r={x:s,y:d,dx:0,dy:0,sx:s,sy:d,end:!1};var u=function(e,s){var d=e.screenX+l,u=e.screenY+a,c=d-r.x,p=u-r.y;i&&Math.abs(c)+Math.abs(p)>=o&&(i=!1),i||(r.end=s,r.dx=c,r.dy=p,r.x=d,r.y=u,t&&t(r,!1),s&&n&&n(r,!0))},c=function(e){e.touches&&(e=e.touches[0]),u(e,!1)},p=function(e){e.touches&&(e=e.touches[0]),e&&u(e,!0);for(var t in g){var n=g[t];n.removeEventListener("mousemove",c),n.removeEventListener("mouseup",p),n.removeEventListener("touchmove",c),n.removeEventListener("touchend",p)}},g=[],f=function(e){if(-1==g.indexOf(e)){try{e.document}catch(e){return}g.push(e);for(var t=0;t<e.frames.length;t++)f(e.frames[t])}};f(top),f(window);for(var h in g){var m=g[h];m.addEventListener("mousemove",c),m.addEventListener("mouseup",p),m.addEventListener("touchmove",c),m.addEventListener("touchend",p)}}function sum(e){var t,n;n=0;for(t in e)n+=+e[t];return n}function buffertoimage(e,t){var n,o,r,i,l;return t&&(o=t.width,r=t.height,i=-t.x,l=-t.y),o||(o=e.width),r||(r=e.height),i||(i=0),l||(l=0),(n=document.createElement("canvas")).width=o,n.height=r,n.getContext("2d").putImageData(e,i,l),n}function imagetobuffer(e,t,n,o,r){var i;return t||(t=0),n||(n=0),o||(o=e.width-t),r||(r=e.height-n),(i=document.createElement("canvas")).width=o,i.height=r,(i=i.getContext("2d")).drawImage(e,-t,-n),i.getImageData(0,0,o,r)}function numbertosigned(e){return e<0?e.toString():"+"+e}function toggleclass(e,t,n){return"string"==typeof e&&(e=elid(e)),void 0==n&&(n=!e.classList.contains(t)),n?e.classList.add(t):e.classList.remove(t),n}function loadyql(e,t,n){dlpage("https://query.yahooapis.com/v1/public/yql?q="+encodeURIComponent(e)+"&format=json",function(e){var o=!1;try{e=JSON.parse(e),o=!0}catch(e){n()}o&&t(e)},n)}function imgcompare(e,t,n,o,r){var i,l,a,s,d,u;for(n||(n=0),o||(o=0),void 0==r&&(r=!1),d=Math.min(e.width,t.width+n),u=Math.min(e.height,t.height+o),r&&(r*=(d-n)*(u-o)),a=0,i=n;i<d;i+=1)for(l=o;l<u;l+=1)if(s=0,s+=Math.abs(e.data[4*i+4*l*e.width]-t.data[4*(i-n)+4*(l-o)*t.width]),s+=Math.abs(e.data[4*i+4*l*e.width+1]-t.data[4*(i-n)+4*(l-o)*t.width+1]),s+=Math.abs(e.data[4*i+4*l*e.width+2]-t.data[4*(i-n)+4*(l-o)*t.width+2]),a+=s*=t.data[4*(i-n)+4*(l-o)*t.width+3]/255,r&&a>r)return!1;return!(r&&a>r)&&(!!r||a/((d-n)*(u-o)))}function coldiff(e,t,n,o,r,i){return Math.abs(e-o)+Math.abs(t-r)+Math.abs(n-i)}function vmpr(e,t){var n,o,r,i;for(r=[],i=e.length,n=0;n<i;n++)for(r[n]=0,o=0;o*i<t.length;o++)r[n]+=e[o]*t[n+o*i];return r}function mmpr(e,t){var n,o,r,i,l;for(i=Math.sqrt(e.length),l=[],o=0;o<i;o++)for(n=0;n<i;n++)for(l[n+i*o]=0,r=0;r<i;r++)l[n+i*o]+=e[r+i*o]*t[n+i*r];return l}function vsum(e,t){var n,o;o=[];for(n in e)o[n]=e[n]+t[n];return o}function mvread(e,t){var n;for(n in t)e=e[t[n]];return e}function imgtoctx(e){var t,n;return n=(t=document.createElement("canvas")).getContext("2d"),t.width=e.width,t.height=e.height,n.drawImage(e,0,0),n}function imgtocnv(e){var t,n;return n=(t=document.createElement("canvas")).getContext("2d"),t.width=e.width,t.height=e.height,n.drawImage(e,0,0),t}function rgbtohsl(e,t,n){var o,r,i,l,a;if("object"==typeof e&&(n=e[2],t=e[1],e=e[0]),e/=256,t/=256,n/=256,l=i=(o=Math.max(e,t,n))-(r=Math.min(e,t,n)),a=.5*(o+r),0==i)var s=0;else o==e&&(s=(6+(t-n)/i)%6),o==t&&(s=(n-e)/i+2),o==n&&(s=(e-t)/i+4);return[Math.round(s/6*255),Math.round(255*l),Math.round(255*a)]}function startbarslide(e,t,n,o){var r,i,l;for(l=t;l=l.previousSibling;)if(l.classList){l.classList.contains("slidetitle")||(l=!1);break}(i=t.children)&&(i=i[0]),r=t.getBoundingClientRect(),newdraghandler2(e,function(e){var o,a;(o=(e.x-r.left)/r.width)>1&&(o=1),o<0&&(o=0),n&&(a=n(o,t,l)),void 0!=a&&(o=a),i&&!1!==a&&(i.style.left=100*o+"%")},o)}function getbrowser(){var e,t=navigator.userAgent,n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?"IE "+((e=/\brv[ :]+(\d+)/g.exec(t)||[])[1]||""):"Chrome"===n[1]&&null!=(e=t.match(/\bOPR\/(\d+)/))?"Opera "+e[1]:(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/(\d+)/i))&&n.splice(1,1,e[1]),n.join(" "))}function zoomimg(e,t,n){var o,r,i,l,a,s,d,u,c,p,g,f,h;if(exitimgzoom(),t&&void 0==n){o=e.getAttribute("src");for(b in t)if(o==t[b].src){n=+b;break}}t&&(f=t[n].title,h=t[n].descr),e instanceof HTMLElement?(r=e.naturalWidth,i=e.naturalHeight,currentzoomedimg=e,g=e.src):(r=t[n].width,i=t[n].height,g=t[n].src),t&&(currentzoomedlist=t,currentzoomedindex=n),(d=e.getBoundingClientRect&&e.getBoundingClientRect())||(d="right"==e?{left:-r/2,top:window.innerHeight/2-i/4,width:r/2,height:i/2}:{left:window.innerWidth,top:window.innerHeight/2-i/4,width:r/2,height:i/2}),(o=.8*Math.min(window.innerWidth/r,window.innerHeight/i))<1&&(r*=o,i*=o),l=(window.innerWidth-r)/2,a=(window.innerHeight-i)/2,(s=elid("zoomedimgouter"))?p=!1:(p=!0,(s=document.createElement("div")).id="zoomedimgouter",s.addEventListener("click",function(){exitimgzoom()}),document.body.appendChild(s),s.style.background="rgba(0,0,0,0)"),p&&(u="",u+="<div id='zoomedimgtitle'></div>",u+="<div id='zoomedimgdescr'></div>",t&&(u+="<div id='zoomedimgleft'></div>",u+="<div id='zoomedimgright'></div>"),s.innerHTML=u,t&&(elid("zoomedimgright").addEventListener("click",function(e){zoomimgshift(1),e.stopPropagation()}),elid("zoomedimgleft").addEventListener("click",function(e){zoomimgshift(-1),e.stopPropagation()}))),(o=elid("zoomedimgright"))&&(o.style.left=l+r-r/4+"px",o.style.top=a+"px",o.style.height=i+"px",o.style.width=r/4+"px",o.style.display="none"),(o=elid("zoomedimgleft"))&&(o.style.left=l+"px",o.style.top=a+"px",o.style.height=i+"px",o.style.width=r/4+"px",o.style.display="none"),elid("zoomedimgtitle").innerHTML=f||"",elid("zoomedimgtitle").style.display="none",elid("zoomedimgtitle").style.opacity=0,elid("zoomedimgtitle").style.left=l+"px",elid("zoomedimgtitle").style.width=r+"px",elid("zoomedimgtitle").style.top=a+"px",elid("zoomedimgdescr").innerHTML=h||"",elid("zoomedimgdescr").style.display="none",elid("zoomedimgdescr").style.opacity=0,elid("zoomedimgdescr").style.left=l+"px",elid("zoomedimgdescr").style.width=r+"px",elid("zoomedimgdescr").style.top=a+i+"px",c=document.createElement("img"),s.appendChild(c),c.outerHTML="<img class='zoomedimg' id='zoomedimg' style='width:"+d.width+"px; height:"+d.height+"px; left:"+d.left+"px; top:"+d.top+"px;' src='"+g+"'/>",setTimeout(function(){elid("zoomedimgouter").style.background="rgba(0,0,0,0.5)";var e=elid("zoomedimg");e.style.left=l+"px",e.style.top=a+"px",e.style.width=r+"px",e.style.height=i+"px"},20),setTimeout(function(){f&&(elid("zoomedimgtitle").style.display="block"),h&&(elid("zoomedimgdescr").style.display="block"),(o=elid("zoomedimgleft"))&&(o.style.display="block"),(o=elid("zoomedimgright"))&&(o.style.display="block")},500),setTimeout(function(){elid("zoomedimgtitle").style.opacity=1,elid("zoomedimgdescr").style.opacity=1},520)}function zoomimgshift(e){var t,n;!1!==(t=currentzoomedindex)&&(n=negmod(t+e,currentzoomedlist.length),exitimgzoom(e<0?"left":"right"),zoomimg(e>0?"left":"right",currentzoomedlist,n))}function exitimgzoom(e){var t,n,o,r;elid("zoomedimg")&&((n=elid("zoomedimg")).id="zoomedoldimg",o=!e&&currentzoomedimg&&currentzoomedimg.getBoundingClientRect&&currentzoomedimg.getBoundingClientRect(),r=n.getBoundingClientRect(),o?(n.style.left=o.left+"px",n.style.top=o.top+"px",n.style.width=o.width+"px",n.style.height=o.height+"px"):(n.style.height=r.height/2+"px",n.style.width=r.width/2+"px",n.style.top=r.top+r.height/4+"px",n.style.left="left"==e?window.innerWidth+"px":-r.width+"px"),(t=elid("zoomedimgright"))&&(t.style.display="none"),(t=elid("zoomedimgleft"))&&(t.style.display="none"),elid("zoomedimgtitle").style.display="none",elid("zoomedimgtitle").style.opacity=0,elid("zoomedimgdescr").style.display="none",elid("zoomedimgdescr").style.opacity=0,e?setTimeout(function(){elid("zoomedoldimg").parentNode.removeChild(elid("zoomedoldimg"))},500):(elid("zoomedimgouter").style.background="rgba(0,0,0,0)",setTimeout(function(){elid("zoomedimgouter").parentNode.removeChild(elid("zoomedimgouter"))},500)),currentzoomedimg=!1)}function overrideselect(e){e||(e=window),e.overrideselected||(overrideselected=function(t){var n,o,r;if(!e.document.getElementById("selectoverlay")||t.target.classList.contains("selectoverlayoption")||t.target.classList.contains("selectoverlayinner")||e.document.getElementById("selectoverlay").removeme(),"SELECT"==t.target.tagName){for(r=t.target.children,n=[],o=[],a=0;a<r.length;a++)n[a]=r[a].innerHTML,o[a]=r[a].value;var i=modalDropdown(function(e){t.target.value=e,t.target.onchange&&t.target.onchange(),t.target.onclick&&t.target.onclick()},n,o);e.document.body.appendChild(i),t.preventDefault()}},e.document.addEventListener("mousedown",overrideselected))}function modalDropdown(e,t,n,o){var r,i,l;for(elid("selectoverlay")&&elid("selectoverlay").removeme(),(l=document.createElement("div")).id="selectoverlay",l.removeme=function(){l.parentNode.removeChild(l)},l.select=function(t){var n=t.getAttribute("data-value");l.removeme(),e&&e(n)},i="<div class='selectoverlayinner'>",r=0;r<t.length;r++)i+="<div class='selectoverlayoption"+(n[r]==o?" isselected":"")+"' data-value='"+n[r]+"' onclick='this.parentNode.parentNode.select(this);'>"+t[r]+"</div>";return i+="</div>",l.innerHTML=i,l}function showModalDropdown(e,t,n,o){var r=modalDropdown(e,t,n,o);return document.body.appendChild(r),r}function unoverrideselect(){document.removeEventListener("mousedown",overrideselected)}function simplecopy(e){var t;(t=document.createElement("textarea")).style.zIndex=1e6,t.style.position="fixed",t.style.left="10px",t.style.top="10px",t.innerHTML=e,t.selectionStart=0,t.selectionEnd=1e8,t.onkeyup=function(e){67==e.keyCode&&t.parentElement.removeChild(t)},document.body.appendChild(t),t.focus()}function postpage(e,t){var n=document.createElement("form");n.setAttribute("method","post"),n.setAttribute("action",e);for(var o in t)if(t.hasOwnProperty(o)){var r=document.createElement("input");r.setAttribute("type","hidden"),r.setAttribute("name",o),r.setAttribute("value",t[o]),n.appendChild(r)}document.body.appendChild(n),n.submit()}function arglist(){var e;return e={},document.location.search.replace(/(?:\?|&)(\w+)(?:=([\w%\/-]*))?(?=$|&)/g,function(t,n,o){e[n]=o||!0}),e}function buildquery(e){var t,n;n="";for(t in e)n+=""==n?"?":"&",n+=encodeURIComponent(t),n+="=",n+=encodeURIComponent(e[t]);return n}function makegraph(e,t,n,o){var r,i,l,a,s,d,u,c,p,g,f,h,m,v,b,y,x,w,C;if(o||(o={}),(o=applyobject({title:!1,line:!0,points:!1,hscale:!1,vscale:!1,hover:!1,combinedinput:!1},o)).combinedinput){var M=t;t=[],n=[];for(var k=0;2*k+1<M.length;k++)t[k]=M[2*k+1],n[k]=M[2*k]}if(!n)for(n=[],k=0;k<t.length;k++)n[k]=k;if(n.length==t.length){if(o.size)v=o.size;else if(0==(v=e.getBoundingClientRect()).height)return;for(d=1/0,u=-1/0,k=0;k<t.length;k++)t[k]>u&&(u=t[k]),t[k]<d&&(d=t[k]);for(u==d&&(d--,u++),a=n[0],(s=n[n.length-1])==a&&(a--,s++),w=(o.vscale,20),C=o.hscale?40:10,b=function(e){return(e-a)/(s-a)*(v.width-w)+10},y=function(e){return(1-(e-d)/(u-d))*(v.height-C)+5},c="M",p="",x="",k=0;k<t.length;k++)m=y(t[k]),c+=(h=b(n[k]))+",",c+=m+" ",p+="<circle id='graphpoint-"+n[k]+"' class='graphpoint' r='3' cx='"+h+"' cy='"+m+"'></circle>",i=k>0?(b(n[k])+b(n[k-1]))/2:0,l=k<t.length-1?(b(n[k+1])+b(n[k]))/2:v.width,x+="<rect class='graphhoverregion' data-v='"+t[k]+"' data-t='"+n[k]+"' y='0' x='"+i+"' height='"+v.height+"' width='"+(l-i)+"'></rect>";for((k=new Date(floorx(a,864e5))).setDate(1),g="",r=-25;k<s;)(h=b(k))>r+50&&(g+="<text class='graphhscaletitle' x='"+b(k)+"' y='"+(v.height-10)+"'>"+monthnames[k.getMonth()]+"</text>",r=h),g+="<path class='graphhscaleline' d='M "+b(k)+","+(v.height-28)+" v "+(r==h?5:3)+"'/>",k.setMonth(k.getMonth()+1);for(k=0,i=0,l=Math.min(30,v.height/3),r=0;r<12;r++){if(Math.abs(y(0)-y(1*Math.pow(10,r)))>l){k=1*Math.pow(10,r);break}if(Math.abs(y(0)-y(2*Math.pow(10,r)))>l){k=2*Math.pow(10,r);break}if(Math.abs(y(0)-y(5*Math.pow(10,r)))>l){k=5*Math.pow(10,r);break}}if((u-d)/k>1e3)qw("wtf error shouldnt happen");else{for(f="",r=floorx(d,k)+k;r<=u;r+=k)f+="<text class='graphvscaletitle' x='0' y='"+(y(r)-2)+"'>"+smallu(r)+"</text>",f+="<path class='graphvscaleline' d='M 0,"+y(r)+" H "+v.width+"'/>";e.innerHTML="",e.setAttribute("viewBox","0 0 "+v.width+" "+v.height),e.setAttribute("preserveAspectRatio","none"),o.line&&((k=document.createElementNS("http://www.w3.org/2000/svg","path")).classList.add("graphpath"),k.setAttribute("d",c),e.appendChild(k)),o.points&&((k=document.createElementNS("http://www.w3.org/2000/svg","g")).innerHTML=p,k.classList.add("graphpoints"),e.appendChild(k)),o.vscale&&((k=document.createElementNS("http://www.w3.org/2000/svg","g")).innerHTML=f,k.classList.add("graphvscale"),e.appendChild(k)),o.hscale&&((k=document.createElementNS("http://www.w3.org/2000/svg","g")).innerHTML=g,k.classList.add("graphhscale"),e.appendChild(k)),o.title&&((k=document.createElementNS("http://www.w3.org/2000/svg","text")).innerHTML=htmlentities(o.title),k.classList.add("graphtitle"),k.setAttribute("x",v.width/2),k.setAttribute("y",20),e.appendChild(k)),o.hover&&((k=document.createElementNS("http://www.w3.org/2000/svg","g")).innerHTML=x,k.classList.add("graphhover"),k.onmouseover=function(e){o.hover(e)},e.appendChild(k))}}}function pushonce(e,t){-1==e.indexOf(t)&&e.push(t)}function strcompare(e,t){var n,o,r,i,l=0,a=0,s=0,d=(e+="").length,u=(t+="").length;for(s=0,n=0;n<d;n++)for(o=0;o<u;o++){for(r=0;n+r<d&&o+r<u&&e.charAt(n+r)===t.charAt(o+r);r++);r>s&&(s=r,l=n,a=o)}return(i=s)&&(l&&a&&(i+=this.strcompare(e.substr(0,a),t.substr(0,a))),l+s<d&&a+s<u&&(i+=this.strcompare(e.substr(l+s,d-l-s),t.substr(a+s,u-a-s)))),i}function strcomparescore(e,t){return(strcompare(e.toLowerCase(),t.toLowerCase())-Math.abs(e.length-t.length)/2)/e.length}function registerfancybutton(e){"string"==typeof e&&(e=elid(e));var t=e.style.background,n=function(n){var o="";n&&(o+="radial-gradient(100px at "+n.offsetX+"px "+n.offsetY+"px, rgba(255,255,255,0.3), rgba(255,255,255,0.1)),"),o+=t,e.style.background=o};e.addEventListener("mousemove",n),e.addEventListener("mouseleave",function(){n(!1)})}function reportimagebug(e,t,n){var o;o=function(e){var o;(o=e.match(/imgid='(\w{3,5})'/))?dlpagepost("/submitbug.php",{body:"-- automated image report --\n-- "+t+" --\n"+document.location.origin+"/i/"+o[1]},function(e){n&&n()},function(){qw("error sending auto report")}):qw("Upload failed, error: "+r)},dlpagepost("/i/upload.php",{img:e.toDataURL("image/png")},o,qw("Failed to upload bug image"))}function getuuid(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)})}function validatecloneold(e,t){var n,o,r,i,l,a,s,d;for(d={i:"number",n:"number",s:"string",b:"boolean",o:"object",a:"object"},s=[],t.replace(/(?:,\s*|^)(\w+):(\w+)(?:\/(\w+))?(?=$|,\s*)/g,function(e,t,n,o){s.push({name:t,type:n,flags:o})}),o={},n=0;n<s.length;n++){if(r=s[n].name,i=s[n].type,l=s[n].flags,void 0==(a=e[r])){if(-1!=l.indexOf("o"))continue;throw"required property "+r+" not found"}if(typeof a!=d[i])throw"property "+r+" is of wrong base type";if("i"==i||"n"==i)o[r]="i"==i?Math.round(a):a;else if("s"==i)o[r]=a;else if("b"==i)o[r]=a;else if("o"==i){if(Array.isArray(a))throw"object "+r+" is in fact an array";o[r]=a}else if("a"==i){if(!Array.isArray(a))throw"property "+r+" is an object instead of array";o[r]=a}}return o}function validateclone(e,t){var n,o={i:"number",n:"number",s:"string",b:"boolean",o:"object",a:"object",parsedobj:"object",parsedarray:"object"},r={i:function(){return 0},n:function(){return 0},s:function(){return""},b:function(){return!1},o:function(){return{}},a:function(){return[]},parsedobj:function(){return{}},parsedarray:function(){return[]}},i=function(e,t){var n,o,r,a,s={};a=0;for(var d=t;;)if(n=(r=e.slice(d)).match(/^\s*,/))d+=n[0].length;else if(n=r.match(/^\s*(\w+):/))d=(o=l(e,n[1],d+n[0].length)).i,o.orgroup=a,s[n[1]]=o;else if(n=r.match(/^\s*\|/))a++,d+=n[0].length;else{if(!(n=r.match(/^\s*\(/))){if((n=r.match(/^\s*(\)|\]|\})/))||(n=r.match(/\s*$/)))return{type:"propgroup",i:d+n[0].length,props:s,orcount:a};throw"no tokens matched at index "+d+", '"+r.slice(0,20)+"'"}(o=i(e,d+n[0].length)).orgroup=a,o.flags="",s["group"+d]=o,d=o.i}},l=function(e,t,n){var o,r,l,a,s,d;if((o=(r=e.slice(n)).match(/^\s*(\w+)/))&&(l=o[1],d=n+o[0].length),(o=r.match(/^\s*\{/))&&(l="parsedobj",d=(s=i(e,n+o[0].length)).i),!l)throw"property not recognised near: "+r.slice(0,10);return(o=e.slice(d).match(/^\s*\/(\w+)/))?(a=o[1],d+=o[0].length):a="",{i:d,name:t,type:l,sub:s,flags:a}},a=function(e,t){var n,o,i,l,s,u,c;if("propgroup"!=t.type)return d(e,t);for(l=0;l<=t.orcount;l++){i={},s=!0;for(n in t.props)if((u=t.props[n]).orgroup==l){if("object"!=typeof(o=a(e,u))){if(-1!=u.flags.indexOf("o"))continue;if(-1!=u.flags.indexOf("d")&&r[u.type])o={val:r[u.type]()};else{if(-1==u.flags.indexOf("n")){c=o,s=!1;break}o={val:null}}}"propgroup"==u.type?applyobject(i,o.val):i[u.name]=o.val}if(s)break}return s?{val:i}:c},s=function(e,t){return null!==e&&(typeof e==o[t]&&(("o"!=t&&"parsedobj"!=t||!Array.isArray(e))&&!!("a"!=t&&"parsedarray"!=t||Array.isArray(e))))},d=function(e,t){var n,o,r,i,l;if(l=t.type,-1!=t.flags.indexOf("a")){if(!e.hasOwnProperty(t.name))return"property '"+t.name+"' is not an own property of the object.";if(r=e[t.name],!s(r,"parsedarray"))return"property '"+t.name+"' is not an array";for(i=[],o=0;o<r.length;o++){if(void 0===r[o])throw"missing array index "+o+" in property: "+t.name;if(!s(r[o],t.type))return"index "+o+" in array is of wrong type";if("object"!=typeof(n=u(l,r[o],t)))throw"invalid array index "+o+", error: "+n;i[o]=n.val}return{val:i}}if(-1!=t.flags.indexOf("m")){if(!e.hasOwnProperty(t.name))return"property '"+t.name+"' is not an own property of the object.";if(r=e[t.name],!s(r,"parsedobj"))return"property '"+t.name+"' is not a mapped object";i={};for(o in r)if(r.hasOwnProperty(o)){if(o.match(/\W/))throw"invalid obj map property name in map: "+t.name;if(void 0===r[o])throw"missing obj map index "+o+" in property: "+t.name;if(!s(r[o],t.type))return"property "+o+" in mapped object is of wrong type";if("object"!=typeof(n=u(l,r[o],t)))throw"invalid array index "+o+", error"+n;i[o]=n.val}return{val:i}}return e.hasOwnProperty(t.name)?(r=e[t.name],s(r,t.type)?u(l,r,t):"property '"+t.name+"' is of the wrong type."):"property '"+t.name+"' is not an own property of the object."},u=function(e,t,n){var o,r;if("i"==e)r=Math.round(t);else if("n"==e)r=t;else if("s"==e)r=t;else if("b"==e)r=t;else if("o"==e)r=t;else if("a"==e)r=t;else if("parsedobj"==e){if("object"!=typeof(o=a(t,n.sub)))throw"Parse failed in subobject, error: "+o;r=o.val}return{val:r}},c=l(t,"root",0);if(!c)return!1;try{n=a({root:e},c)}catch(e){return qw("Failed to validate object, error: "+e),!1}return"object"!=typeof n?(qw("Failed to validate object, error: "+n),!1):n.val}function stringdownload(e,t){filedownload(e,"data:text/plain;charset=utf-8,"+encodeURIComponent(t))}function filedownload(e,t){var n=document.createElement("a");n.setAttribute("href",t),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}function fancycopy(e,t){var n,o;return str='\t<div style="position:fixed; top:30px; left:10%; right:10%; z-index:100000;">\t\t<div style="border-radius:7px; background:#CCC; color:#000; font-family:sans-serif; font-size:13px; display:flex; flex-direction:column; padding:5px;">\t\t\t<div>Copy the text above and save it to a file.</div>\t\t\t<textarea style="margin-top:5px; height:60px; resize:none; box-sizing:border-box; overflow-x:hidden;" readonly></textarea>\t\t\t<div style="margin-top:5px; text-align:center; cursor:pointer;" class="sliminput" onclick="this.parentElement.parentElement.remove();">Close</div>\t\t</div>\t</div>',(n=(new DOMParser).parseFromString(str,"text/html").getElementsByTagName("body")[0].children[0]).querySelector("div>div>div").innerHTML=t||"Press ctrl+V to copy the text below",(o=n.querySelector("textarea")).innerHTML=escapehtml(e),n.onclick=o.onselectstart=function(){o.focus(),o.select(),event.preventDefault()},document.body.appendChild(n),o.focus(),n}function exportlocalstorage(e){var t,n;n={};for(t in localStorage)e&&0!=t.indexOf(e)||(n[t]=localStorage[t]);return JSON.stringify(n)}function importlocalstorage(e){var t,n;t="string"==typeof e?JSON.parse(e):e;for(n in t)localStorage[t]=n}function pagepopup(e,t,n){return window.open(location.origin+"/apps/alt1/help/"+e,null,"width="+t+",height="+n)}function readstorage(e,t){return localStorage[e]?localStorage[e]:t}function elcreate(e,t,n,o,r){var i=document.createElement(e);if(t&&(i.className=t),n&&(i.style.cssText=n),o)for(var l in o)!1!==o[l]&&null!=o[l]&&i.setAttribute(l,o[l]);if(null!=r&&void 0!=r){Array.isArray(r)||(r=[r]);for(var l in r)"object"!=typeof r[l]?i.appendChild(document.createTextNode(r[l].toString())):i.appendChild(r[l])}return i}function eldiv(e,t,n){var o,r,i,l,a,s,d=0;if("string"==typeof arguments[d]){var u=arguments[d++].split(":");o=u[0];var c=u[1]?u[1].split("/"):[];l=c[0],a=c[1]}if("object"!=typeof arguments[d]||Array.isArray(arguments[d])||arguments[d]instanceof DocumentFragment||(r=arguments[d++]),"object"==typeof arguments[d]&&Array.isArray(arguments[d])?i=arguments[d++]:"object"==typeof arguments[d]&&arguments[d]instanceof DocumentFragment&&(s=arguments[d++]),r=r||{},o&&(r.class=o),"input"==(l=r&&r.tag||l||"div")&&a&&(r.type=a),"frag"==l)p=document.createDocumentFragment();else var p=r&&r.namespace?document.createElementNS(r.namespace,l):document.createElement(l);if(r)for(var g in r)!1!==r[g]&&null!=r[g]&&"tag"!=g&&"namespace"!=g&&("on"==g.substr(0,2)?p[g]=r[g]:p.setAttribute(g,r[g]));if(null!=i&&void 0!=i){Array.isArray(i)||(i=[i]);for(var g in i)null!=i[g]&&("object"!=typeof i[g]?p.appendChild(document.createTextNode(i[g].toString())):p.appendChild(i[g]))}else null!=s&&p.appendChild(s);return p}function elfrag(){for(var e=document.createDocumentFragment(),t=0;t<arguments.length;t++)null!=arguments[t]&&("object"!=typeof arguments[t]?e.appendChild(document.createTextNode(arguments[t].toString())):e.appendChild(arguments[t]));return e}function elselect(e,t){var n=document.createDocumentFragment(),o=function(e,o){n.appendChild(eldiv({tag:"option",value:e,selected:t==e?"":null},[o]))};if(Array.isArray(e))for(var r=0;r<e.length;r++)o(r,e[r]);else for(var r in e)o(r,e[r]);return n}function bindAutoComplete(e,t){"string"==typeof e&&(e=elid(e));var n={};if(e.suggest=n,n.optel=null,n.selectindex=-1,n.suggests=null,n.wordindex=0,n.words=[],n.originalword="",n.autohide=!0,n.singleword=!1,Array.isArray(t)){var o=t;t=function(e,t){return o.filter(function(t){return-1!=t.indexOf(e)}).map(function(e){return{t:e}})}}return n.obtainSuggests=function(){if(n.singleword)n.words=[e.value],n.wordindex=0;else{n.words=e.value.split(" "),n.wordindex=0;for(var o=0,r=0;o<n.words.length&&(n.wordindex=o,!((r+=n.words[o].length)>e.selectionStart));o++);}n.originalword=n.words[n.wordindex];var i=t(n.originalword,e);i&&n.setSuggests(i)},n.setSuggests=function(t){if(n.optel&&(n.optel.remove(),n.optel=null),t&&0!=t.length){t&&t.length>15&&(t.length=15),n.suggests=t,n.selectindex=-1,n.optel=n.optel||elcreate("div","insg-opts"),n.optel.innerHTML="";for(var o=0;o<t.length;o++){var r=eldiv("insg-opt",[t[o].t,t[o].n?eldiv("insg-opt-n",[t[o].n]):null]);r.onclick=function(t){n.insertSuggestion(t),e.focus()}.bind(null,t[o].t),n.optel.appendChild(r)}e.parentElement.appendChild(n.optel)}else n.suggests=null},n.selectSuggestion=function(t){if(n.optel&&n.suggests){t=Math.max(-1,Math.min(n.suggests.length-1,t)),n.selectindex=t;for(var o=n.optel.children,r=0;r<o.length;r++)o[r].classList.remove("selected");-1!=n.selectindex&&o[n.selectindex]&&(o[n.selectindex].classList.add("selected"),o[n.selectindex].focus());var i=-1==n.selectindex?n.originalword:n.suggests[n.selectindex].t;n.words[n.wordindex]=i;var l=0;for(r=0;r<n.wordindex;r++)l+=n.words[r].length+1;var a=l+i.length,s=0;s=n.originalword.toLocaleLowerCase().replace(/ /g,"_")==i.slice(0,n.originalword.length).toLowerCase().replace(/ /g,"_")?l+n.originalword.length:l,e.value=n.words.join(" "),e.selectionStart=s,e.selectionEnd=a}},n.insertSuggestion=function(t){if(!t){if(-1==n.selectindex)return void n.setSuggests(null);t=n.suggests[n.selectindex].t}n.selectindex=-1,n.words[n.wordindex]=t,e.value=n.words.join(" "),e.selectionStart=e.selectionEnd,n.setSuggests(null)},e.addEventListener("input",n.obtainSuggests),e.addEventListener("blur",function(e){n.autohide&&setTimeout(n.setSuggests.bind(null,null),500)}),e.addEventListener("keydown",function(t){32==t.keyCode&&t.ctrlKey&&(n.obtainSuggests(),t.preventDefault()),40!=t.keyCode||n.suggests||n.obtainSuggests(),40==t.keyCode&&n.suggests&&(n.selectSuggestion(n.selectindex+1),t.preventDefault()),38==t.keyCode&&n.suggests&&(n.selectSuggestion(n.selectindex-1),t.preventDefault()),39==t.keyCode&&n.suggests&&n.suggests.length>0&&(n.insertSuggestion(),n.obtainSuggests()),9==t.keyCode&&n.suggests&&n.suggests.length>0&&(n.insertSuggestion(),t.preventDefault()),13==t.keyCode&&n.suggests&&n.suggests.length>0&&(n.insertSuggestion(),t.preventDefault()),27==t.keyCode&&(n.setSuggests(null),e.value=e.value.slice(0,e.selectionStart))}),n}function elclear(e){for("string"==typeof e&&(e=elid(e));e.firstChild;)e.removeChild(e.firstChild)}function elput(e,t){"string"==typeof e&&(e=elid(e)),elclear(e),e.appendChild(t)}function jsonDecode(e){if(""==e)return null;try{return JSON.parse(e)}catch(e){return null}}function jsonEncode(e,t){return JSON.stringify(e,t?2:0)}function randomint(e,t){return Math.floor(e+Math.random()*(t-e+1))}function propnameOf(e,t){for(var n in e)if(e[n]==t)return n;return null}function absoluteUrl(e){var t=document.createElement("a");return t.href=e,t.protocol+"//"+t.host+t.pathname+t.search+t.hash}function isBetween(e,t,n){return!isNaN(e)&&(!(e<t)&&!(e>n))}function repeatStr(e,t){for(var n="",o=0;o<t;o++)n+=e;return n}function completePromises(e){return Promise.all(e.map(function(e){return e.catch(function(e){return e})}))}function startGA(){window._gaq||"runeapps.org"!=document.location.host&&!window.testGA||(window._gaq=window._gaq||[],_gaq.push(["_setAccount","UA-29246134-1"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"https://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}())}function sendGA(e){("runeapps.org"==document.location.host||window.testGA)&&(startGA(),e?_gaq.push(["_trackPageview",e]):_gaq.push(["_trackPageview"]))}function onPageReady(e,t){var n=!1,o=function(){n||"complete"!=document.readyState&&"interactive"!=document.readyState||(n=!0,e())};o(),window.addEventListener("DOMContentLoaded",o)}function initStorage(e){if("http:"==document.location.protocol||localStorage.protocol_imported_http)return initStorage.ready=!0,void e();if(!initStorage.loading){initStorage.loading=!0;var t=function(i){if(i.origin==r&&i.data.slice(0,o.length)==o){var a=jsonDecode(i.data.slice(o.length));for(var s in a)null==localStorage[s]&&(localStorage[s]=a[s]);window.removeEventListener("message",t),l.close(),localStorage["protocol_imported_"+n]="true",qw("imported localstorage from "+n),initStorage.ready=!0,e()}},n="http",o="localstoragedump:",r=n+"://"+document.location.hostname,i=r+"/exportstorage.html",l=null;l=window.open(i),window.addEventListener("message",t)}}currentzoomedimg=!1,currentzoomedlist=[],currentzoomedindex=!1,overrideselected=!1,RsApi=(hiscore=function(e,t){dlpage("/data/getstats.php?player="+lowname(e),function(n){var o=jsonDecode(n);t(o||!1,e)},function(){t(!1,e)})},{hiscore:hiscore}),Object.defineProperty(Function.prototype,"b",{value:function(){var e=arguments,t=this;return function(){return t.apply(null,e)}}}),Object.defineProperty(Array.prototype,"bind",{value:function(){var e=arguments,t=this;return function(){for(var n=0;n<t.length;n++)t[n].apply(this,e)}}}),window==top&&setTimeout(sendGA.b(),1e3),initStorage.ready=!1,initStorage.loading=!1;