<html>
<head>
	<link rel="stylesheet" type="text/css" href="css/nis.css"/>
	<link rel="stylesheet" type="text/css" href="css/style.css" >
    
    <!-- runeapps scripts -->
    <script type="text/javascript" src="/ComponentCounter/scripts/runeappslib.js"></script>
    <script type="text/javascript" src="/ComponentCounter/scripts/jquery.js"></script>
    <script type="text/javascript" src="/ComponentCounter/scripts/alt1lib.js"></script>
    <script type="text/javascript" src="/ComponentCounter/scripts/imagedetect.js"></script>
	<script type="text/javascript" src="/ComponentCounter/scripts/chatbox.js"></script>
	<!-- Telos main script 
	<script type="text/javascript" src="/scripts/script.js"></script>-->
</head>
<body class="nis">
	<div class="header">
	   <div class="nisseperator">
           <div id="common" class="contenttab lefttab" onclick="hide(this);readChatbox()">Common</div>
           <div id="uncommon" class="contenttab lefttab" onclick="hide(this);readChatbox()">Uncommon</div>
           <div id="rare1" class="contenttab lefttab" onclick="hide(this);readChatbox()">Rare1</div>
           <div id="rare2" class="contenttab lefttab" onclick="hide(this);readChatbox()">Rare2</div>
	   </div>
	</div>
	<div class="curestate" id="overview">
	<table class='common'>
        <tr><th>Components</th><th>Quantity</th></tr>
        <tr><td>Base parts</td><td></td></tr>
        <tr><td>Blade parts</td><td></td></tr>
        <tr><td>Clear parts</td><td></td></tr>
        <tr><td>Connector parts</td><td></td></tr>
        <tr><td>Cover parts</td><td></td></tr>
        <tr><td>Crafted parts</td><td></td></tr>
        <tr><td>Crystal parts</td><td></td></tr>
        <tr><td>Deflecting parts</td><td></td></tr>
        <tr><td>Delicate parts</td><td></td></tr>
        <tr><td>Flexible parts</td><td></td></tr>
        <tr><td>Head parts</td><td></td></tr>
        <tr><td>Magic parts</td><td></td></tr>
        <tr><td>Metallic parts</td><td></td></tr>
        <tr><td>Organic parts</td><td></td></tr>
        <tr><td>Padded parts</td><td></td></tr>
        <tr><td>Plated parts</td><td></td></tr>
        <tr><td>Simple parts</td><td></td></tr>
        <tr><td>Smooth parts</td><td></td></tr>
        <tr><td>Spiked parts</td><td></td></tr>
        <tr><td>Spiritual parts</td><td></td></tr>
        <tr><td>Stave parts</td><td></td></tr>
        <tr><td>Tensile parts</td><td></td></tr>
    </table>
    <table class='uncommon'>
        <tr><th>Components</th><th>Quantity</th></tr>
        <tr><td>Dextrous components</td><td></td></tr>
        <tr><td>Direct components</td><td></td></tr>
        <tr><td>Enhancing components</td><td></td></tr>
        <tr><td>Ethereal components</td><td></td></tr>
        <tr><td>Evasive components</td><td></td></tr>
        <tr><td>Healthy components</td><td></td></tr>
        <tr><td>Heavy components</td><td></td></tr>
        <tr><td>Imbued components</td><td></td></tr>
        <tr><td>Light components</td><td></td></tr>
        <tr><td>Living components</td><td></td></tr>
        <tr><td>Pious components</td><td></td></tr>
        <tr><td>Powerful components</td><td></td></tr>
        <tr><td>Precious components</td><td></td></tr>
        <tr><td>Precise components</td><td></td></tr>
        <tr><td>Protective components</td><td></td></tr>
        <tr><td>Refined components</td><td></td></tr>
        <tr><td>Sharp components</td><td></td></tr>
        <tr><td>Strong components</td><td></td></tr>
        <tr><td>Stunning components</td><td></td></tr>
        <tr><td>Subtle components</td><td></td></tr>
        <tr><td>Swift components</td><td></td></tr>
        <tr><td>Variable components</td><td></td></tr>
    </table>
    <table class='rare1'>
        <tr><th>Components</th><th>Quantity</th></tr>
        <tr><td>Ancient components</td><td></td></tr>
        <tr><td>Armadyl components</td><td></td></tr>
        <tr><td>Ascended components</td><td></td></tr>
        <tr><td>Avernic components</td><td></td></tr>
        <tr><td>Bandos components</td><td></td></tr>
        <tr><td>Brassican components</td><td></td></tr>
        <tr><td>Clockwork components</td><td></td></tr>
        <tr><td>Corporeal components</td><td></td></tr>
        <tr><td>Culinary components</td><td></td></tr>
        <tr><td>Cywir components</td><td></td></tr>
        <tr><td>Dragonfire components</td><td></td></tr>
        <tr><td>Explosive components</td><td></td></tr>
        <tr><td>Faceted components</td><td></td></tr>
        <tr><td>Fortunate components</td><td></td></tr>
        <tr><td>Fungal components</td><td></td></tr>
        <tr><td>Harnessed components</td><td></td></tr>
        <tr><td>Ilujankan components</td><td></td></tr>
        </table>
        <table class='rare2'>
        <tr><th>Components</th><th>Quantity</th></tr>
        <tr><td>Knightly components</td><td></td></tr>
        <tr><td>Noxious components</td><td></td></tr>
        <tr><td>Oceanic components</td><td></td></tr>
        <tr><td>Pestiferous components</td><td></td></tr>
        <tr><td>Resilient components</td><td></td></tr>
        <tr><td>Rumbling components</td><td></td></tr>
        <tr><td>Saradomin components</td><td></td></tr>
        <tr><td>Seren components</td><td></td></tr>
        <tr><td>Shadow components</td><td></td></tr>
        <tr><td>Shifting components</td><td></td></tr>
        <tr><td>Silent components</td><td></td></tr>
        <tr><td>Undead components</td><td></td></tr>
        <tr><td>Zamorak components</td><td></td></tr>
        <tr><td>Zaros components</td><td></td></tr>
    </table>
	</div>
	
<script>
var reader = new ChatBoxReader();
var old_lines = [];
var stamps_used = false;
var list = ["Simple parts", "Magic parts", "Spiritual parts", "Stave parts", "Tensile parts", "Head parts", "Connector parts", "Cover parts", "Organic parts", "Crafted parts", "Plated parts", "Padded parts", "Crystal parts", "Blade parts", "Delicate parts", "Clear parts", "Smooth parts", "Spiked parts", "Deflecting parts", "Base parts", "Metallic parts", "Flexible parts", "Refined components", "Powerful components", "Healthy components", "Stunning components", "Enhancing components", "Evasive components", "Precious components", "Pious components", "Living components", "Ethereal components", "Variable components", "Dextrous components", "Strong components", "Swift components", "Imbued components", "Direct components", "Subtle components", "Light components", "Protective components", "Sharp components", "Heavy components", "Precise components", "Brassican components", "Knightly components", "Dragonfire components", "Fungal components", "Explosive components", "Corporeal components", "Armadyl components", "Bandos components", "Saradomin components", "Seren components", "Zamorak components", "Zaros components", "Resilient components", "Silent components", "Noxious components", "Rumbling components", "Pestiferous components", "Fortunate components", "Ancient components", "Culinary components", "Shifting components", "Harnessed components", "Oceanic components", "Ascended components", "Undead components", "Avernic components", "Shadow components", "Ilujankan components", "Cywir components", "Faceted components", "Clockwork components"]


function readChatbox() {
    reader.find();
	reader.diffRead = !stamps_used;
	reader.readargs = {
		colors: [

		],
		backwards: true
	};
	var minoverlap 	= 50;
	var new_lines 	= [];
	var opts 		= reader.read() || [];

	// Filter old readings
	if (stamps_used) {
		//console.log('stamps found!');
		for (var a = 0; a < opts.length; a++) {
			//console.log("unfiltered: " + opts[a].text);
			var match = false;
			for (var i = 0; i < old_lines.length; i++) {
				if (reader.matchLines(opts[a].text, old_lines[i].text)) {
					match = true;
					break;
				}
			}
			if (!match) {
				old_lines.push(opts[a]);
				new_lines.push(opts[a]);
			}
		}
		if (old_lines.length > minoverlap) old_lines.splice(0, old_lines.length - minoverlap); 
		opts = new_lines;
	}
	for (a = 0; a < opts.length; a++) {
		// Get the timestamp of the line
		//console.log(opts[a].text);
		var stamp = opts[a].text.match(/(\d\d:\d\d:\d\d)/);
		if (stamp) stamps_used = true;
		// Instance made
		if (opts[a].text.indexOf("Materials") !== -1) {
			var mats = opts[a].text.split("Materials gained: ")[1].split(" x ")[1];
            var count = opts[a].text.split("Materials gained: ")[1].split(" x ")[0];
            
            //$(".curestate").html($(".curestate").html() + opts[a].text +"<br>");
		}
		
	}
}

	
function hide(test)
{
    $("table").hide();
    $("."+test.id).show();
}
document.ready = function()
{
	$("table").hide();
        $(".common").show();
};
</script>	
</body>
</html>
